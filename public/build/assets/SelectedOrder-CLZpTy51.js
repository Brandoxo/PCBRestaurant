import{_ as g}from"./StatusBadge-DgB45FVv.js";import{y as x,j as f,g as n,o as d,i as c,b as e,t as a,a as v,f as p,C as b,S as i,s as y}from"./app-CxbOl7Wq.js";const h={key:0,class:"bg-white shadow-md rounded-lg p-2 px-4 w-3/4 lg:w-full m-4 mx-auto hover:scale-[1.02] transition-all transform ease-in-out duration-300"},w={key:0,class:"flex bg-red-100 text-center text-red-600 py-1 rounded-full text-sm font-semibold w-full mt-2 lg:mt-0"},C={class:"mx-auto"},_={key:1,class:"flex bg-approveGreen/30 text-center text-approveGreen py-1 rounded-full text-sm font-semibold w-full mt-2 lg:mt-0"},k={class:"lg:flex justify-between items-center mx-auto"},S={class:"md:text-lg lg:text-xl"},B={class:"font-extrabold"},E={class:"flex items-center justify-between mt-4"},N={class:"flex-col"},O={class:"text-start text-3xl font-bold"},V={class:"flex text-sm mt-2"},D={class:"text-center text-secondary"},j={class:"text-center text-secondary"},T={class:"flex items-center gap-2"},I={class:"text-center text-midBlue font-bold"},L={key:1,class:"mx-auto w-3/4 bg-white rounded-lg p-4"},G={__name:"SelectedOrder",props:{order:Object},setup(t){const o=x().props.auth.user,l=t;console.log("order in:",l.order);const u=()=>{i.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cancelar orden",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&(m(),i.fire("¡Cancelada!","La orden ha sido cancelada.","success"))})},m=async()=>{try{await y.post(`/orders/update/${l.order.id}`,{status:"Cancelada",user_name:o.name},{preserveState:!0,onSuccess:()=>{l.order.status="Cancelada",console.log("Orden cancelada")},onError:r=>{console.error("Error al cancelar la orden:",r)}})}catch(r){console.error("Error en la solicitud:",r)}};return f(()=>o&&o.permissions&&o.permissions.includes("cancel orders")),console.log("User permissions:",o?o.permissions:"No user"),(r,s)=>t.order?(d(),n("div",h,[t.order.status==="Cancelada"?(d(),n("div",w,[e("span",C," Cancelada por "+a(t.order.cancelled_by??"Admin"),1)])):c("",!0),t.order.status==="Completada"?(d(),n("div",_,[...s[0]||(s[0]=[e("span",{class:"mx-auto"}," Venta Finalizada ",-1)])])):c("",!0),e("div",k,[e("h2",S,[s[1]||(s[1]=p(" Orden ",-1)),e("span",B,"ID # "+a(t.order.id??"0000"),1),s[2]||(s[2]=e("img",{src:"assets/icons/svg/links/copy.svg",alt:"Copy Icon",class:"inline w-6 ml-2 cursor-pointer"},null,-1))]),v(g,{class:""})]),e("div",E,[e("div",N,[e("h2",O," Mesa "+a(t.order.table.number??"7"),1),e("div",V,[e("p",D,a(t.order.date_time?new Date(t.order.date_time).toLocaleTimeString().slice(0,-1):"-"),1),e("p",j,a(t.order.date_time?new Date(t.order.date_time).toLocaleDateString():"-"),1)])]),t.order.status==="En curso"?(d(),n("button",{key:0,onClick:u,class:"mt-4 bg-dangerRed/30 p-2 rounded-full text-dangerRed font-bold hover:bg-dangerRed/50 transition"}," Cancelar Orden ")):c("",!0),e("button",T,[s[3]||(s[3]=e("img",{src:"assets/icons/svg/links/sheet.svg",alt:"Imagen de la orden",class:"w-6"},null,-1)),e("p",I," Export #"+a(t.order.id??""),1)])])])):(d(),n("div",L,[...s[4]||(s[4]=[b('<div class="flex animate-pulse space-x-4"><div class="size-10 rounded-full bg-gray-200"></div><div class="flex-1 space-y-6 py-1"><div class="h-2 rounded bg-gray-200"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="col-span-2 h-2 rounded bg-gray-200"></div><div class="col-span-1 h-2 rounded bg-gray-200"></div></div><div class="h-2 rounded bg-gray-200"></div></div></div></div>',1)])]))}};export{G as default};
