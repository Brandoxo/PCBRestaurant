import{m as i,g as d,o as c,b as e,a as l,F as b,x as $,t as u,w as B,k as v,p as f,q as x,s as n}from"./app-1_flsrAA.js";import{_ as D}from"./Modal-AXOU4J0g.js";import{_ as h}from"./InputLabel-BWt_JfsC.js";import{_ as C}from"./InputError-CWQbNGcO.js";const N={class:"bg-white p-4 rounded-2xl"},S={class:"w-full mt-2 border"},M={class:"border p-2 text-center"},V={class:"border p-2 text-center"},j={class:"border p-2 text-center"},q={class:"border p-2 flex gap-2 justify-center"},z=["onClick"],L=["onClick"],U={class:"p-6"},F={class:"flex flex-col"},G={class:"flex justify-between"},H={__name:"ListCategories",props:{categories:Object},setup(m){const p=i({errors:{}}),r=i({}),a=i(!1),g=m,_=o=>{a.value=!0,r.value=g.categories.data.find(t=>t.id===o)},w=()=>{a.value=!1},y=o=>{var t;if(r.value.name===((t=g.categories.data.find(s=>s.name===r.value.name&&s.id!==o))==null?void 0:t.name)){document.querySelector(".text-red-500").classList.remove("hidden");return}x.put(`/Categories/edit/${o}`,r.value,{preserveState:!1,replace:!0,onSuccess:()=>{n().success("Categoría actualizada exitosamente"),a.value=!1},onError:s=>{n().error("Error al actualizar la categoría"),console.error("Error al actualizar categoría:",s)}})},E=o=>{confirm("¿Estás seguro de que deseas eliminar esta categoría?")&&x.delete(`/Categories/${o}`,{onSuccess:()=>{n().success("Categoría eliminada exitosamente")},onError:t=>{n().error("Error al eliminar la categoría"),console.error("Error al eliminar categoría:",t)}})};return(o,t)=>(c(),d(b,null,[e("div",N,[e("table",S,[t[6]||(t[6]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"p-4"},"#"),e("th",{class:"p-4"},"Nombre"),e("th",{class:"p-4"},"Descripción"),e("th",{class:"p-4"},"Acciones")])],-1)),e("tbody",null,[(c(!0),d(b,null,$(m.categories.data,s=>(c(),d("tr",{key:s.id},[e("td",M,u(s.id),1),e("td",V,u(s.name),1),e("td",j,u(s.description),1),e("td",q,[e("button",{onClick:k=>_(s.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...t[4]||(t[4]=[e("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,z),e("button",{onClick:k=>E(s.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...t[5]||(t[5]=[e("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,L)])]))),128))])])]),l(D,{show:a.value,"onUpdate:show":t[3]||(t[3]=s=>a.value=s)},{default:B(()=>[e("div",U,[t[8]||(t[8]=e("h3",{class:"text-lg font-bold mb-4"},"Editar Categoría",-1)),e("form",F,[e("div",null,[l(h,{for:"name",value:"Nombre"}),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.name=s),type:"text",placeholder:"Nombre de Categoría",class:"border p-2 rounded-lg mb-4"},null,512),[[f,r.value.name]]),l(C,{message:p.value.errors.name},null,8,["message"]),t[7]||(t[7]=e("span",{class:"text-red-500 hidden"},"Este nombre ya está en uso",-1))]),e("div",null,[l(h,{for:"description",value:"Descripción"}),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.description=s),type:"text",placeholder:"Descripción",class:"border p-2 rounded-lg mb-4"},null,512),[[f,r.value.description]]),l(C,{message:p.value.errors.description},null,8,["message"])]),e("div",G,[e("button",{onClick:w,class:"bg-dangerRed hover:bg-red-700 text-white px-4 py-2 rounded-lg"},"Cancelar"),e("button",{onClick:t[2]||(t[2]=s=>y(r.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end"},"Guardar Cambios")])])])]),_:1},8,["show"])],64))}};export{H as default};
