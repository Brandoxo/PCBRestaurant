import{m as u,g as m,o as c,b as s,a as o,e as S,F as y,x as B,t as p,w as b,k as f,p as w,f as C,z as N,q as _,s as n}from"./app-1_flsrAA.js";import{_ as V}from"./Modal-AXOU4J0g.js";import{_ as L}from"./StatusBadge-DlxYni6K.js";import{C as z}from"./CancelButton-CCxJaZaK.js";import{_ as v}from"./InputError-CWQbNGcO.js";import{_ as g}from"./InputLabel-BWt_JfsC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"bg-white p-4 rounded-2xl"},j={class:"w-full mt-2 border"},q={class:"border p-2 text-center"},R={class:"border p-2 text-center"},D={class:"border p-2 text-center"},F={class:"border p-2 text-center"},G={class:"border p-2 flex gap-2 justify-center"},A=["onClick"],O=["onClick"],P={class:"p-6"},H={class:"flex flex-col"},I={class:"flex justify-between"},ee={__name:"ListTables",props:{mesas:Object},setup(x){const d=u({errors:{}}),i=x,l=u(!1),a=u({}),E=()=>{l.value=!1},h=r=>{const e=i.mesas.data.find(t=>t.id===r);a.value=e?{...e}:{id:r,number:"",status:"",capacity:""},l.value=!0},k=r=>{var e;if(a.value.number===((e=i.mesas.data.find(t=>t.number===a.value.number&&t.id!==r))==null?void 0:e.number)){document.querySelector(".text-red-500").classList.remove("hidden");return}_.put(`/Tables/edit/${r}`,a.value,{onSuccess:()=>{n().success("Mesa actualizada exitosamente"),l.value=!1},onError:t=>{n().error("Error al actualizar la mesa"),console.error("Error al actualizar mesa:",t)}})},T=r=>{confirm("¿Estás seguro de que deseas eliminar esta mesa?")&&_.delete(`/Tables/${r}`,{onSuccess:()=>{n().success("Mesa eliminada exitosamente")},onError:e=>{n().error("Error al eliminar mesa"),console.error("Error al eliminar mesa:",e)}})},M=r=>i.mesas.data.filter(t=>t.number.toString().includes(r));return(r,e)=>(c(),m(y,null,[s("div",U,[s("form",{onSubmit:S(M,["prevent"])},[...e[5]||(e[5]=[s("input",{type:"text",placeholder:"Buscar mesa...",class:"border p-2 rounded-lg w-full mb-4"},null,-1)])],32),s("table",j,[e[8]||(e[8]=s("thead",null,[s("tr",{class:"bg-gray-100"},[s("th",{class:"p-4"},"#"),s("th",{class:"p-4"},"Numero"),s("th",{class:"p-4"},"Estado"),s("th",{class:"p-4"},"Capacidad"),s("th",{class:"p-4"},"Acciones")])],-1)),s("tbody",null,[(c(!0),m(y,null,B(x.mesas.data,t=>(c(),m("tr",{key:t.id},[s("td",q,p(t.id),1),s("td",R,p(t.number),1),s("td",D,[o(L,{status:t.status},null,8,["status"])]),s("td",F,p(t.capacity)+" Personas",1),s("td",G,[s("button",{onClick:$=>h(t.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...e[6]||(e[6]=[s("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,A),s("button",{onClick:$=>T(t.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...e[7]||(e[7]=[s("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,O)])]))),128))])])]),o(V,{show:l.value,"onUpdate:show":e[4]||(e[4]=t=>l.value=t)},{default:b(()=>[s("div",P,[e[13]||(e[13]=s("h3",{class:"text-lg font-bold mb-4"},"Editar Categoría",-1)),s("form",H,[s("div",null,[o(g,{for:"number",value:"Número de Mesa",class:"mb-2"}),f(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.number=t),type:"text",placeholder:"Numero de Mesa",class:"border p-2 rounded-lg mb-4 w-full"},null,512),[[w,a.value.number]]),o(v,{message:d.value.errors.number},null,8,["message"]),e[9]||(e[9]=s("span",{class:"text-red-500 hidden"},"Este número de mesa ya está en uso.",-1))]),s("div",null,[o(g,{class:"block text-sm font-medium text-black mb-2"},{default:b(()=>[...e[10]||(e[10]=[C("Estado",-1)])]),_:1}),f(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.status=t),class:"border p-2 rounded-lg mb-4"},[...e[11]||(e[11]=[s("option",{value:"",disabled:"",selected:""},"Selecciona un estado",-1),s("option",{value:"Libre"},"Libre",-1),s("option",{value:"Reservada"},"Reservada",-1)])],512),[[N,a.value.status]]),o(v,{message:d.value.errors.status},null,8,["message"])]),s("div",null,[o(g,{for:"capacity",value:"Capacidad"}),f(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.capacity=t),type:"text",placeholder:"Capacidad",class:"border p-2 rounded-lg mb-4"},null,512),[[w,a.value.capacity]]),o(v,{message:d.value.errors.capacity},null,8,["message"])]),s("div",I,[o(z,{onClick:E},{default:b(()=>[...e[12]||(e[12]=[C("Cancelar",-1)])]),_:1}),s("button",{onClick:e[3]||(e[3]=t=>k(a.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end"},"Guardar Cambios")])])])]),_:1},8,["show"])],64))}};export{ee as default};
