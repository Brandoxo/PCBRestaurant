import{_ as C}from"./StatusBadge-CXaBk-J1.js";import{g as a,o as d,b as t,a as w,f as I,t as i,F as g,q as x,n as N,m as f,y as A,G as D,S as b,i as B}from"./app-DQfRif9u.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"flex mb- justify-evenly items-center"},V={class:"md:text-lg lg:text-xl"},$={class:"font-extrabold"},j={class:"text-center text-3xl font-bold"},z={class:"flex justify-center items-center text-sm mt-2 gap-2"},E={class:"text-center text-secondary"},M={class:"text-center text-secondary"},q={class:"mt-2 w-full border rounded px-2 py-1"},F=["value"],G={__name:"Orders",props:{order:Object},setup(e){return console.log("order:",e.order.order_details),(h,o)=>(d(),a("div",{class:N(["bg-white p-2 rounded-lg shadow-md mt-4 max-w-md mx-auto w-full",e.order.status==="Cancelada"?"opacity-50 border-2 border-red-500":"",e.order.status==="Completada"?"border-2 border-green-500 opacity-50":""])},[t("div",T,[t("h2",V,[o[0]||(o[0]=I(" Orden ",-1)),t("span",$,"ID #"+i(e.order.id??"0000"),1)]),w(C,{status:e.order.status},null,8,["status"])]),t("h2",j," Mesa "+i(e.order.table.number??"-"),1),t("div",z,[t("p",E,i(e.order.date_time?new Date(e.order.date_time).toLocaleTimeString():"-"),1),o[1]||(o[1]=t("span",{class:"text-secondary"},"|",-1)),t("p",M,i(e.order.date_time?new Date(e.order.date_time).toLocaleDateString():"-"),1)]),t("select",q,[o[2]||(o[2]=t("option",{class:"text-center",disabled:"",selected:""}," Ver menú de la Orden ",-1)),(d(!0),a(g,null,x(e.order.order_details,s=>(d(),a("option",{disabled:"",key:s.id,value:s.product.id},i(s.product.name)+" x"+i(s.quantity),9,F))),128))])],2))}},J=["onClick","gs-x","gs-y","data-gs-id"],R={__name:"AllOrders",props:{orders:Array},emits:["select"],setup(e,{emit:v}){const h=e,o=v,s=f(m()),u=f(null);let l;const c=f(JSON.parse(localStorage.getItem("deletedOrderIds")||"[]"));function _(){localStorage.setItem("deletedOrderIds",JSON.stringify(c.value))}function m(){return window.innerWidth<1536?1:3}function k(){l&&l.column(m())}return A(()=>{s.value=m(),u.value&&(l=D.init({cellHeight:180,column:s.value,resizable:{handles:"none"},removable:!0,removeTimeout:100},u.value),l.on("removed",function(O,y){y.forEach(r=>{const n=r.el.getAttribute("data-gs-id"),p=h.orders.find(S=>S.id.toString()===n);!c.value.includes(n)&&p.status==="Completada"?(c.value.push(n),b.fire({title:"Orden eliminada",text:"La orden ha sido eliminada correctamente.",icon:"success",confirmButtonText:"Aceptar"}),_()):b.fire({title:"No se puede eliminar",text:'Solo se pueden eliminar las órdenes con estado "Completada".',icon:"error",confirmButtonText:"Aceptar"}).then(()=>{location.reload()})})}),window.addEventListener("resize",k))}),(O,y)=>(d(),a("div",{ref_key:"gridRef",ref:u,class:"grid-stack"},[!e.orders||e.orders.length===0?(d(),a(g,{key:0},x(15,r=>t("div",{key:r,class:"animate-pulse bg-gray-300 2xl:w-56 h-28 rounded-lg grid-stack-item"})),64)):B("",!0),(d(!0),a(g,null,x(e.orders.filter(r=>!c.value.includes(r.id.toString())),(r,n)=>(d(),a("div",{key:r.id,onClick:p=>o("select",r),class:"cursor-pointer overflow-y-auto hover:scale-[1.03] transition-all transform ease-in-out duration-300 grid-stack-item","gs-x":n%s.value,"gs-y":Math.floor(n/s.value),"gs-width":1,"gs-height":1,"data-gs-id":r.id},[w(G,{order:r},null,8,["order"])],8,J))),128))],512))}},P=L(R,[["__scopeId","data-v-8077aea9"]]);export{P as default};
