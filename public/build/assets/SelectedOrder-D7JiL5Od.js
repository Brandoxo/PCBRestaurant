import{_ as p}from"./StatusBadge-DfrrEeWg.js";import{z as w,j as C,g as r,o as a,i as l,b as t,t as o,a as k,f,D as B,S as v,x as S}from"./app-Dp1p2CX0.js";const N={key:0,class:"bg-white shadow-md rounded-lg p-2 px-4 w-3/4 lg:w-full mt-4 mx-auto hover:scale-[1.02] transition-all transform ease-in-out duration-300"},E={key:0,class:"flex bg-red-100 text-center text-red-600 py-1 rounded-full text-sm font-semibold w-full mt-2 lg:mt-0"},O={class:"mx-auto"},D={key:1,class:"flex bg-approveGreen/30 text-center text-approveGreen py-1 rounded-full text-sm font-semibold w-full mt-2 lg:mt-0"},V={class:"lg:flex justify-between items-center mx-auto"},j={class:"md:text-lg lg:text-xl"},T={class:"font-extrabold"},z={class:"flex items-center justify-between gap-4 mt-4"},I={class:"flex-col"},L={class:"text-center text-3xl font-bold"},R={key:0},_={key:1},A={class:"flex text-sm mt-2 gap-2 justify-between"},G={class:"text-center text-secondary"},$={class:"text-center text-secondary"},F={class:"gap-2 text-center"},P={class:"text-center text-midBlue font-bold"},U={key:1,class:"mx-auto w-3/4 bg-white rounded-lg p-4 mt-4"},J={__name:"SelectedOrder",props:{order:Object},setup(e){const n=w().props.auth.user,c=e;console.log("order in:",c.order);const b=()=>{v.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cancelar orden",cancelButtonText:"Cancelar"}).then(d=>{d.isConfirmed&&(y(),v.fire("¡Cancelada!","La orden ha sido cancelada.","success"))})},y=async()=>{try{await S.post(`/orders/update/${c.order.id}`,{status:"Cancelada",user_name:n.name},{preserveState:!0,onSuccess:()=>{c.order.status="Cancelada",console.log("Orden cancelada")},onError:d=>{console.error("Error al cancelar la orden:",d)}})}catch(d){console.error("Error en la solicitud:",d)}},h=C(()=>n&&n.permissions&&n.permissions.includes("cancel orders"));return console.log("User permissions:",n?n.permissions:"No user"),(d,s)=>{var i,u,m,g,x;return e.order?(a(),r("div",N,[e.order.status==="Cancelada"?(a(),r("div",E,[t("span",O," Cancelada por "+o(e.order.cancelled_by??"Admin"),1)])):l("",!0),e.order.status==="Completada"?(a(),r("div",D,[...s[0]||(s[0]=[t("span",{class:"mx-auto"}," Venta Finalizada ",-1)])])):l("",!0),t("div",V,[t("h2",j,[s[1]||(s[1]=f(" Orden ",-1)),t("span",T,"ID # "+o(e.order.id??"0000"),1),s[2]||(s[2]=t("img",{src:"assets/icons/svg/links/copy.svg",alt:"Copy Icon",class:"inline w-6 ml-2 cursor-pointer"},null,-1))]),k(p,{class:""})]),t("div",z,[t("div",I,[t("h2",L,[f(o(((i=e.order.table)==null?void 0:i.name)??((u=e.order.room)==null?void 0:u.name)??"N/A")+" ",1),e.order.room?(a(),r("span",R,o((m=e.order.room)==null?void 0:m.prefix)+"-"+o((g=e.order.room)==null?void 0:g.number),1)):e.order.table?(a(),r("span",_,o((x=e.order.table)==null?void 0:x.number),1)):l("",!0)]),t("div",A,[t("p",G,o(e.order.date_time?new Date(e.order.date_time).toLocaleTimeString().slice(0,5):"-"),1),t("p",$,o(e.order.date_time?new Date(e.order.date_time).toLocaleDateString():"-"),1)])]),e.order.status==="En curso"&&h.value?(a(),r("button",{key:0,onClick:b,class:"mt-4 bg-dangerRed/30 max-w-96 p-2 rounded-md w-full uppercase text-dangerRed tracking-widest font-extrabold hover:bg-dangerRed/50 transition"}," Cancelar ")):l("",!0),t("button",F,[s[3]||(s[3]=t("img",{src:"assets/icons/svg/links/sheet.svg",alt:"Imagen de la orden",class:"w-6 mx-auto"},null,-1)),s[4]||(s[4]=t("p",{class:"text-center text-midBlue font-bold"}," Export ",-1)),t("p",P," #"+o(e.order.id??""),1)])])])):(a(),r("div",U,[...s[5]||(s[5]=[B('<div class="flex animate-pulse space-x-4"><div class="size-10 rounded-full bg-gray-200"></div><div class="flex-1 space-y-6 py-1"><div class="h-2 rounded bg-gray-200"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="col-span-2 h-2 rounded bg-gray-200"></div><div class="col-span-1 h-2 rounded bg-gray-200"></div></div><div class="h-2 rounded bg-gray-200"></div></div></div></div>',1)])]))}}};export{J as default};
