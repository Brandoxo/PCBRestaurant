import{_ as R}from"./AuthenticatedLayout-DQS-MJCY.js";import{z as C,r as x,g as s,o as t,a as y,d as h,h as A,w as U,b as e,F as i,s as d,f as z,i as f,t as u,x as P,y as E}from"./app-BdJHaHp1.js";import"./ApplicationLogo-D3tysuJd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"px-4 p-4 overflow-y-auto h-screen pt-4 py-60"},V={class:"mx-auto max-w-7xl space-y-6 px-6 lg:px-8 mb-4"},$={class:"bg-white p-4 shadow sm:rounded-lg sm:p-8"},B={class:"min-w-full divide-y divide-gray-200"},T={class:"bg-white divide-y divide-gray-200"},F={class:"px-6 py-4 whitespace-nowrap"},I={key:0,class:"text-blue-500 font-extrabold"},S={class:"px-6 py-4 whitespace-nowrap"},D={class:"px-6 py-4 whitespace-nowrap"},G=["onChange"],L={disabled:"",selected:""},Y=["value"],j=["onClick"],q={class:"px-6 py-4 whitespace-nowrap"},H={key:0,class:"font-extrabold text-center uppercase p-2 bg-green-300 text-green-600 text-sm rounded-xl"},Q={__name:"Index",props:{users:Array,roles:Array,permissions:Array},setup(v){const n=v,g=C().props.auth.user,b=n.users.map(c=>c.permissions).flat(),m=x(null),_=x(null),p=x({});console.log("Yo merengues",g),console.log("Usuarios",n.users),console.log("Usuario con roles)",n.users.roles),console.log("Permisos de usuarios",b),console.log("Roles",n.roles);const w=(c,r)=>{console.log(`Actualizar rol para el usuario ${c} al rol ${r}`),P.post(route("/Role/Update"),{user_id:c,role:r},{onSuccess:()=>{E().success("Rol actualizado con éxito"),console.log("Rol actualizado con éxito")},onError:o=>{console.error("Error al actualizar el rol:",o)}})};return(c,r)=>(t(),s(i,null,[y(h(A),{title:"Usuarios"}),y(R,null,{default:U(()=>[e("div",N,[e("div",V,[e("div",$,[e("table",B,[r[1]||(r[1]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rol "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Permisos ")])],-1)),e("tbody",T,[(t(!0),s(i,null,d(n.users,o=>(t(),s("tr",{key:o.id},[e("td",F,[z(u(o.name)+" ",1),o.id===h(g).id?(t(),s("span",I,"(Tú)")):f("",!0)]),e("td",S,u(o.email),1),e("td",D,[(t(!0),s(i,null,d(o.roles,l=>(t(),s("div",{key:l.id,class:"grid grid-cols-1 gap-2"},[e("select",{onChange:a=>{m.value=o.id,_.value=l.id,p.value.value=a.target.value,console.log("Rol seleccionado:",p.value.value,"Para el usuario:",o.id)}},[e("option",L,u(l.name),1),(t(!0),s(i,null,d(n.roles.filter(a=>!o.roles.some(k=>k.id===a.id)),a=>(t(),s("option",{key:a.id,value:a.name},u(a.name),9,Y))),128))],40,G),m.value===o.id&&_.value===l.id?(t(),s("button",{key:0,class:"p-2 bg-blue-500 hover:bg-blue-800 transform duration-300 text-white rounded text-sm",onClick:a=>w(o.id,p.value.value)}," Guardar Cambios ",8,j)):f("",!0)]))),128))]),e("td",q,[e("ul",null,[(t(!0),s(i,null,d(o.roles,l=>(t(),s("li",{key:l.id,class:"grid grid-cols-1 2xl:grid-cols-3 gap-2"},[l.name==="Admin"?(t(),s("span",H,"All")):(t(!0),s(i,{key:1},d(l.permissions,a=>(t(),s("span",{onChange:r[0]||(r[0]=()=>{}),key:a.id,class:"font-extrabold text-sm p-2 rounded-xl text-center uppercase bg-green-300 text-green-600"},u(a.name),33))),128))]))),128))])])]))),128))])])])])])]),_:1})],64))}};export{Q as default};
