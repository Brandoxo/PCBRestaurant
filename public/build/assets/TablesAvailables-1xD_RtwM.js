import{g as l,o as r,p as O,L as C,r as N,A as B,j as M,l as H,b as n,c as V,i as x,F as w,s as A,k as D,I as E,n as h,a as $,t as u,d as U,f as p,w as y,y as T}from"./app-DAFVx_ll.js";import F from"./Notes-BwPe46CF.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as q}from"./StatusBadge-DRQ8Wx9B.js";import{i as R}from"./isRoomServiceEnabled-CDymUHne.js";const z={},I={class:"text-center w-full bg-green-900/80 p-4 rounded-xl text-white font-black uppercase text-sm border border-transparent tracking-widest transition duration-150 ease-in-out hover:bg-gray-700 focus:bg-red-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 active:bg-gray-900"};function J(b,f){return r(),l("button",I,[O(b.$slots,"default")])}const K=G(z,[["render",J]]),P={class:"flex justify-evenly items-center mb-4 gap-8"},Q={class:"text-m uppercase font-black"},W=["src","alt"],X={class:"font-extrabold text-xl text-red-900"},Y={key:0,class:"flex justify-center items-center gap-2"},Z={class:"text-center text-gray-500"},k={class:"font-bold text-lg text-gray-600"},ne={__name:"TablesAvailables",props:{tables:Object,selectedTable:Object,rooms:Object},emits:["tableSelected","update:notes"],setup(b,{emit:f}){const g=f,a=b;console.log("Aqui tan las rooms sr",a.rooms);const c=R,{tables:v,rooms:L}=C(a),m=N(a.notes??"");B(m,e=>{g("update:notes",e)});const _=M(()=>{const e=v.value||{},s=L.value||{},t=c&&c.value!==void 0?c.value:!!c,i=Object.keys(e).map(o=>({...e[o]||{},ui_id:`table-${e[o]&&(e[o].id||o)||o}`,isRoom:!1,label:e[o]&&e[o].room&&e[o].room.name?e[o].room.name:"Mesa"})),d=t?Object.keys(s).map(o=>({...s[o]||{},ui_id:`room-${s[o]&&(s[o].id||o)||o}`,isRoom:!0,label:s[o].name||`Habitación ${s[o].number||o}`,number:s[o].number||s[o].name||"",capacity:s[o].capacity||1,status:s[o].status||"Libre"})):[];return[...i,...d]});console.log("Lista combinada",_.value);function S(e){const s=e.isRoom?"Habitación":"Mesa";if(e.status!=="Libre"&&e.status!=="Reservada"){T().error(`No puedes seleccionar una ${e.isRoom?"habitación":"mesa"} ocupada.`);return}g("tableSelected",e),window.scrollTo({top:0,behavior:"smooth"}),T().info(`Seleccionando orden para la ${s} #${e.number}`),console.log("Selection data:",e)}const j=e=>{var i,d;if(!a.selectedTable)return!1;const s=((i=a.selectedTable)==null?void 0:i.ui_id)||((d=a.selectedTable)!=null&&d.id?`table-${a.selectedTable.id}`:null),t=(e==null?void 0:e.ui_id)||(e!=null&&e.id?`table-${e.id}`:null);return s&&t?s!==t:!1};return H(()=>{console.log("Tables data:",a.tables)}),(e,s)=>(r(),l(w,null,[n("div",{class:h([a.selectedTable?"animate-pulse transition-transform duration-300 ease-in-out min-w-80 2xl:w-1/4":"grid sm:grid-cols-2  lg:grid-cols-3 2xl:grid-cols-4 gap-6 2xl:gap-10 overflow-y-auto scrollbar-hide scroll-smooth w-full"])},[(r(!0),l(w,null,A(_.value,t=>D((r(),l("div",{key:t.ui_id||`table-${t.id}`,class:h(["bg-white rounded-xl items-center p-4 space-y-2 shadow-lg",t.status!=="Libre"&&t.status!=="Reservada"?"opacity-50 pointer-events-none scale-90":"cursor-pointer hover:scale-[1.02] pointer-events-auto",a.selectedTable&&(a.selectedTable.ui_id||`table-${a.selectedTable.id}`)===(t.ui_id||`table-${t.id}`)?"pointer-events-auto":""])},[n("div",null,[$(q,{status:t.status},null,8,["status"])]),n("div",P,[n("h2",Q,u(t.isRoom?"Habitación":"Mesa"),1),n("img",{src:t.isRoom?"/assets/icons/svg/menu/rooms.svg":"/assets/icons/svg/menu/table.svg",alt:t.isRoom?"Habitación":"Mesa",class:"w-16"},null,8,W),n("span",X,"#"+u(U(R)?t.prefix:"")+"-"+u(t.number),1)]),t.isRoom?x("",!0):(r(),l("div",Y,[s[3]||(s[3]=n("img",{src:"/assets/icons/svg/visual/people.svg",alt:"Capacidad",class:"inline-block w-4 h-4"},null,-1)),n("p",Z,[s[1]||(s[1]=p(" Capacidad para ",-1)),n("span",k,u(t.capacity),1),s[2]||(s[2]=p(" personas ",-1))])])),$(K,{onClick:i=>S(t),disabled:t.status!=="Libre"&&t.status!=="Reservada"},{default:y(()=>[...s[4]||(s[4]=[p(" Generar Orden ",-1)])]),_:2},1032,["onClick","disabled"])],2)),[[E,!j(t)]])),128))],2),a.selectedTable?(r(),V(F,{key:0,notes:m.value,"onUpdate:notes":s[0]||(s[0]=t=>m.value=t)},null,8,["notes"])):x("",!0)],64))}};export{ne as default};
