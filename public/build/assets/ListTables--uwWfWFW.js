import{m as u,j as M,g as i,o as c,b as e,a as r,k as m,p as f,F as y,q as $,i as N,t as v,w,A as V,f as L,S as j,s as C,x as p}from"./app-CsP7x5_r.js";import{_ as U}from"./Modal-DFU7laGl.js";import{_ as R}from"./StatusBadge-B6ZjF_Wp.js";import{C as z}from"./CancelButton-Cd16a06n.js";import{_ as g}from"./InputError-B4enj-dk.js";import{_ as x}from"./InputLabel-DMLnGteH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"bg-white p-4 rounded-2xl"},A={class:"w-full mt-2 border"},D={class:"border p-2 text-center"},F={class:"border p-2 text-center"},G={class:"border p-2 text-center"},O={class:"border p-2 text-center"},P={key:0,class:"border p-2 flex gap-2 justify-center"},Q=["onClick"],H=["onClick"],I={class:"p-6"},J={class:"flex flex-col"},K={class:"flex justify-between"},W={class:"flex justify-between"},oe={__name:"ListTables",props:{mesas:Object},setup(_){const b=u({errors:{}}),n=_,l=u(!1),a=u({}),h=()=>{l.value=!1},E=o=>{const s=n.mesas.data.find(t=>t.id===o);a.value=s?{...s}:{id:o,number:"",status:"",capacity:""},l.value=!0},T=o=>{var s;if(a.value.number===((s=n.mesas.data.find(t=>t.number===a.value.number&&t.id!==o))==null?void 0:s.number)){document.querySelector(".text-red-500").classList.remove("hidden");return}C.put(`/Tables/edit/${o}`,a.value,{onSuccess:()=>{p().success("Mesa actualizada exitosamente"),l.value=!1},onError:t=>{p().error("Error al actualizar la mesa"),console.error("Error al actualizar mesa:",t)}})},B=o=>{j.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar mesa",cancelButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&C.delete(`/Tables/${o}`,{onSuccess:()=>{p().success("Mesa eliminada exitosamente")},onError:t=>{p().error("Error al eliminar mesa"),console.error("Error al eliminar mesa:",t)}})})},d=u(""),k=M(()=>d.value?n.mesas.data.filter(o=>o.number.toString().includes(d.value)):n.mesas.data);return(o,s)=>(c(),i(y,null,[e("div",q,[m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>d.value=t),type:"text",placeholder:"Buscar mesa...",class:"border p-2 rounded-lg w-full mb-4"},null,512),[[f,d.value]]),e("table",A,[s[8]||(s[8]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"p-4"},"#"),e("th",{class:"p-4"},"Numero"),e("th",{class:"p-4"},"Estado"),e("th",{class:"p-4"},"Capacidad"),e("th",{class:"p-4"},"Acciones")])],-1)),e("tbody",null,[(c(!0),i(y,null,$(k.value,t=>(c(),i("tr",{key:t.id},[e("td",D,v(t.id),1),e("td",F,v(t.number),1),e("td",G,[r(R,{status:t.status},null,8,["status"])]),e("td",O,v(t.capacity)+" Personas ",1),t.status==="Libre"||t.status==="Reservada"?(c(),i("td",P,[e("button",{onClick:S=>E(t.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...s[6]||(s[6]=[e("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,Q),e("button",{onClick:S=>B(t.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...s[7]||(s[7]=[e("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,H)])):N("",!0)]))),128))])])]),r(U,{show:l.value,"onUpdate:show":s[5]||(s[5]=t=>l.value=t)},{default:w(()=>[e("div",I,[s[12]||(s[12]=e("h3",{class:"text-lg font-bold mb-4"},"Editar Categoría",-1)),e("form",J,[e("div",null,[r(x,{for:"number",value:"Número de Mesa",class:"mb-2"}),m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.value.number=t),type:"text",placeholder:"Numero de Mesa",class:"border p-2 rounded-lg mb-4 w-full"},null,512),[[f,a.value.number]]),r(g,{message:b.value.errors.number},null,8,["message"]),s[9]||(s[9]=e("span",{class:"text-red-500 hidden"},"Este número de mesa ya está en uso.",-1))]),e("div",K,[e("div",null,[r(x,{for:"status",value:"Estado",class:"m-2"}),m(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>a.value.status=t),class:"border p-2 rounded-lg mb-4"},[...s[10]||(s[10]=[e("option",{value:"",disabled:"",selected:""}," Selecciona un estado ",-1),e("option",{value:"Libre"},"Libre",-1),e("option",{value:"Reservada"},"Reservada",-1)])],512),[[V,a.value.status]]),r(g,{message:b.value.errors.status},null,8,["message"])]),e("div",null,[r(x,{for:"capacity",value:"Capacidad",class:"m-2"}),m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>a.value.capacity=t),type:"text",placeholder:"Capacidad",class:"border p-2 rounded-lg mb-4"},null,512),[[f,a.value.capacity]]),r(g,{message:b.value.errors.capacity},null,8,["message"])])]),e("div",W,[r(z,{onClick:h},{default:w(()=>[...s[11]||(s[11]=[L("Cancelar",-1)])]),_:1}),e("button",{onClick:s[4]||(s[4]=t=>T(a.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end"}," Guardar Cambios ")])])])]),_:1},8,["show"])],64))}};export{oe as default};
