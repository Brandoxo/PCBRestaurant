import{_ as x}from"./StatusBadge-CDr05-Uk.js";import{y as f,j as v,g as n,o as d,i as c,b as e,t as a,a as p,f as b,C as y,S as i,s as h}from"./app-BsmVB6Bw.js";const w={key:0,class:"bg-white shadow-md rounded-lg p-2 px-4 w-3/4 lg:w-full m-4 mx-auto hover:scale-[1.02] transition-all transform ease-in-out duration-300"},C={key:0,class:"flex bg-red-100 text-center text-red-600 py-1 rounded-full text-sm font-semibold w-full mt-2 lg:mt-0"},_={class:"mx-auto"},k={key:1,class:"flex bg-approveGreen/30 text-center text-approveGreen py-1 rounded-full text-sm font-semibold w-full mt-2 lg:mt-0"},S={class:"lg:flex justify-between items-center mx-auto"},B={class:"md:text-lg lg:text-xl"},O={class:"font-extrabold"},E={class:"flex items-center justify-between mt-4"},N={class:"flex-col"},V={class:"text-start text-3xl font-bold"},D={class:"flex text-sm mt-2"},j={class:"text-center text-secondary"},T={class:"text-center text-secondary"},I={class:"flex items-center gap-2"},L={class:"text-center text-midBlue font-bold"},R={key:1,class:"mx-auto w-3/4 bg-white rounded-lg p-4"},$={__name:"SelectedOrder",props:{order:Object},setup(t){const o=f().props.auth.user,l=t;console.log("order in:",l.order);const u=()=>{i.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cancelar orden",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&(m(),i.fire("¡Cancelada!","La orden ha sido cancelada.","success"))})},m=async()=>{try{await h.post(`/orders/update/${l.order.id}`,{status:"Cancelada",user_name:o.name},{preserveState:!0,onSuccess:()=>{l.order.status="Cancelada",console.log("Orden cancelada")},onError:r=>{console.error("Error al cancelar la orden:",r)}})}catch(r){console.error("Error en la solicitud:",r)}},g=v(()=>o&&o.permissions&&o.permissions.includes("cancel orders"));return console.log("User permissions:",o?o.permissions:"No user"),(r,s)=>t.order?(d(),n("div",w,[t.order.status==="Cancelada"?(d(),n("div",C,[e("span",_," Cancelada por "+a(t.order.cancelled_by??"Admin"),1)])):c("",!0),t.order.status==="Completada"?(d(),n("div",k,[...s[0]||(s[0]=[e("span",{class:"mx-auto"}," Venta Finalizada ",-1)])])):c("",!0),e("div",S,[e("h2",B,[s[1]||(s[1]=b(" Orden ",-1)),e("span",O,"ID # "+a(t.order.id??"0000"),1),s[2]||(s[2]=e("img",{src:"assets/icons/svg/links/copy.svg",alt:"Copy Icon",class:"inline w-6 ml-2 cursor-pointer"},null,-1))]),p(x,{class:""})]),e("div",E,[e("div",N,[e("h2",V," Mesa "+a(t.order.table.number??"7"),1),e("div",D,[e("p",j,a(t.order.date_time?new Date(t.order.date_time).toLocaleTimeString().slice(0,-1):"-"),1),e("p",T,a(t.order.date_time?new Date(t.order.date_time).toLocaleDateString():"-"),1)])]),t.order.status==="En curso"&&g.value?(d(),n("button",{key:0,onClick:u,class:"mt-4 bg-dangerRed/30 p-2 rounded-full text-dangerRed font-bold hover:bg-dangerRed/50 transition"}," Cancelar Orden ")):c("",!0),e("button",I,[s[3]||(s[3]=e("img",{src:"assets/icons/svg/links/sheet.svg",alt:"Imagen de la orden",class:"w-6"},null,-1)),e("p",L," Export #"+a(t.order.id??""),1)])])])):(d(),n("div",R,[...s[4]||(s[4]=[y('<div class="flex animate-pulse space-x-4"><div class="size-10 rounded-full bg-gray-200"></div><div class="flex-1 space-y-6 py-1"><div class="h-2 rounded bg-gray-200"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="col-span-2 h-2 rounded bg-gray-200"></div><div class="col-span-1 h-2 rounded bg-gray-200"></div></div><div class="h-2 rounded bg-gray-200"></div></div></div></div>',1)])]))}};export{$ as default};
