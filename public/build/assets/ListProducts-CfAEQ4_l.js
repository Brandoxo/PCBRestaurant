import{m as g,y as M,j as P,g as d,o as i,b as t,a as r,e as I,k as n,p as u,i as _,F as C,q as S,t as c,w as f,f as x,A as U,S as T,s as E,x as w}from"./app-BsmVB6Bw.js";import{_ as F}from"./Modal-UKDxrgvS.js";import{_ as G}from"./StatusBadge-CDr05-Uk.js";import{_ as a}from"./InputLabel-BU4rQUX9.js";import{C as z}from"./CancelButton-BkxStC9p.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"bg-white p-4 rounded-2xl w-full max-w-96 sm:max-w-[40rem] lg:max-w-full mx-auto"},K={class:"overflow-x-auto w-full"},O={class:"w-full mt-2 border"},q={class:"bg-gray-100"},J={key:0,class:"p-4"},Q={class:"border p-2 text-center"},R={class:"border p-2 text-center hidden lg:block"},H=["src"],W={class:"border p-2 text-center"},X={class:"border p-2 text-center hidden lg:block"},Y={class:"border p-2 text-center"},Z={class:"border p-2 text-center"},ee={class:"border p-2 text-center hidden lg:block"},te={class:"border p-2 text-center"},oe={key:0,class:"border p-2 flex gap-2 justify-center"},se=["onClick"],le=["onClick"],re={class:"p-6"},ne={class:"flex-col"},ae={class:"text-center"},de={class:"pr-4 border-r flex flex-col items-center justify-evenly border-dashed border-2 border-gray-300 self-center p-6"},ie={class:"grid grid-cols-2 gap-4 mt-4"},ue=["value"],ce={class:"flex justify-between mt-2"},xe={__name:"ListProducts",props:{products:Object,categories:Object},setup(V){const p=V,m=g(!1),s=g({}),v=g(null),B=l=>{v.value=l.target.files[0],console.log("Selected image file:",v.value)},k=M().props.auth.user,y=P(()=>k&&k.roles&&k.roles.includes("Admin"));function N(l){m.value=!0;const e=p.products.find(o=>o.id===l);s.value={...e},console.log(e.name)}function h(){m.value=!1}const $=l=>{const e=new FormData;e.append("category_id",s.value.category_id??""),e.append("name",s.value.name??""),e.append("sku",s.value.sku??""),e.append("description",s.value.description??""),e.append("price",s.value.price??""),e.append("cost",s.value.cost??""),e.append("tax",s.value.tax??""),e.append("is_active",s.value.is_active),v.value&&e.append("image",v.value),E.post(`/Menu/edit/${l}`,e,{onSuccess:()=>{w().success("Producto Actualizado Correctamente."),h(),s.value={}},onError:o=>{w().error("El producto no se pudo actualizar"),console.error("El producto no se Actualizó. ",o)}})},j=l=>{T.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&E.delete(`/Menu/${l}`,{onSuccess:()=>{w().success("Producto Eliminado Correctamente."),s.value={}},onError:o=>{w().error("El producto no se pudo eliminar"),console.error("El producto no se Eliminó. ",o)}})})},b=g(""),A=P(()=>b.value?p.products.filter(l=>l.name.toLowerCase().includes(b.value.toLowerCase())):p.products);return(l,e)=>(i(),d(C,null,[t("div",L,[t("form",{onSubmit:e[1]||(e[1]=I((...o)=>l.searchTable&&l.searchTable(...o),["prevent"]))},[n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),type:"text",placeholder:"Buscar Producto...",class:"border p-2 rounded-lg w-full mb-4"},null,512),[[u,b.value]])],32),t("div",K,[t("table",O,[t("thead",null,[t("tr",q,[e[12]||(e[12]=t("th",{class:"p-4"},"Categoría",-1)),e[13]||(e[13]=t("th",{class:"p-4 hidden lg:block"},"Imagen",-1)),e[14]||(e[14]=t("th",{class:"p-4"},"Nombre",-1)),e[15]||(e[15]=t("th",{class:"p-4 hidden lg:block"},"SKU",-1)),e[16]||(e[16]=t("th",{class:"p-4"},"Precio",-1)),e[17]||(e[17]=t("th",{class:"p-4"},"Disponible",-1)),e[18]||(e[18]=t("th",{class:"p-4 hidden lg:block"},"Fecha de Creación",-1)),e[19]||(e[19]=t("th",{class:"p-4"},"Fecha de Actualización",-1)),y.value?(i(),d("th",J,"Acciones")):_("",!0)])]),t("tbody",null,[(i(!0),d(C,null,S(A.value,o=>(i(),d("tr",{key:o.id},[t("td",Q,c(o.category_id),1),t("td",R,[t("img",{src:o.image,alt:"Product Image",class:"w-16 h-16 object-cover mx-auto"},null,8,H)]),t("td",W,c(o.name),1),t("td",X,c(o.sku.slice(4,10)),1),t("td",Y," $ "+c(o.price),1),t("td",Z,[r(G,{status:o.is_active?"Activo":"Inactivo"},null,8,["status"])]),t("td",ee,c(o.created_at.slice(0,10)),1),t("td",te,c(o.updated_at.slice(0,10)),1),y.value?(i(),d("td",oe,[t("button",{onClick:D=>N(o.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...e[20]||(e[20]=[t("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,se),t("button",{onClick:D=>j(o.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...e[21]||(e[21]=[t("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,le)])):_("",!0)]))),128))])])])]),r(F,{show:m.value,"onUpdate:show":e[11]||(e[11]=o=>m.value=o)},{default:f(()=>[t("div",re,[e[29]||(e[29]=t("h3",{class:"text-lg font-bold mb-4"},"Editar Producto",-1)),t("form",ne,[t("div",ae,[r(a,{for:"image",value:"Imagen del Producto"}),t("div",de,[t("input",{onChange:B,id:"image",type:"file",accept:"image/png, image/jpeg",class:"mt-2"},null,32)]),e[22]||(e[22]=t("span",{class:"text-sm text-gray-500 mt-2"},"(Solo archivos PNG o JPG)",-1))]),t("div",ie,[t("div",null,[r(a,{for:"name",class:"block text-sm font-medium text-black mb-2"},{default:f(()=>[...e[23]||(e[23]=[x("Nombre",-1)])]),_:1}),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.name=o),type:"text",placeholder:"Nombre",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,s.value.name]])]),t("div",null,[r(a,{for:"categories",value:"Categoría",class:"mb-2"}),n(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.category_id=o),type:"text",placeholder:"",class:"border rounded-lg mb-2 w-full"},[e[24]||(e[24]=t("option",{value:""},"Selecciona un Categoría",-1)),(i(!0),d(C,null,S(p.categories,o=>(i(),d("option",{key:o.id,value:o.id},c(o.name),9,ue))),128))],512),[[U,s.value.category_id]])]),t("div",null,[r(a,{for:"description",value:"Descripción"}),n(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.description=o),placeholder:"Descripción",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,s.value.description]])]),t("div",null,[r(a,{for:"sku",value:"SKU"}),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.sku=o),type:"text",placeholder:"SKU",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,s.value.sku]])]),t("div",null,[r(a,{for:"price",value:"Precio"}),n(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.price=o),type:"number",placeholder:"Precio",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,s.value.price]])]),t("div",null,[r(a,{for:"cost",value:"Costo"}),n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.cost=o),type:"number",placeholder:"Costo",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,s.value.cost]])]),t("div",null,[r(a,{class:"block text-sm font-medium text-black"},{default:f(()=>[...e[25]||(e[25]=[x("Disponible",-1)])]),_:1}),n(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.value.is_active=o),class:"border p-2 rounded-lg w-full mb-2"},[...e[26]||(e[26]=[t("option",{value:"",disabled:"",selected:""}," Selecciona una opción ",-1),t("option",{value:"1"},"Sí",-1),t("option",{value:"0"},"No",-1)])],512),[[U,s.value.is_active]])]),t("div",null,[r(a,{for:"tax",value:"Impuesto"}),n(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>s.value.tax=o),type:"number",placeholder:"Impuesto",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,s.value.tax]])])]),t("div",ce,[r(z,{onClick:h},{default:f(()=>[...e[27]||(e[27]=[x("Cancelar",-1)])]),_:1}),t("button",{onClick:e[10]||(e[10]=o=>$(s.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end uppercase flex items-center text-sm font-bold"},[...e[28]||(e[28]=[t("img",{src:"/assets/icons/svg/actions/save.svg",class:"w-8 inline-flex mr-2",alt:"Guardar Cambios"},null,-1),x("Guardar Cambios ",-1)])])])])])]),_:1},8,["show"])],64))}};export{xe as default};
