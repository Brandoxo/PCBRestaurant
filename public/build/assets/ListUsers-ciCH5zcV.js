import{z as k,r as g,g as s,o as t,b as e,F as c,s as d,f as w,i as _,t as u,d as R,x as C,y as A}from"./app-CAE0YkQQ.js";const U={class:"bg-white p-4 shadow sm:rounded-lg sm:p-8"},z={class:"min-w-full divide-y divide-gray-200"},P={class:"bg-white divide-y divide-gray-200"},E={class:"px-6 py-4 whitespace-nowrap"},B={key:0,class:"text-blue-500 font-extrabold"},N={class:"px-6 py-4 whitespace-nowrap"},T={class:"px-6 py-4 whitespace-nowrap"},V=["onChange"],$={disabled:"",selected:""},F=["value"],L=["onClick"],S={class:"px-6 py-4 whitespace-nowrap"},j={key:0,class:"font-extrabold text-center uppercase p-2 bg-green-300 text-green-600 text-sm rounded-xl"},G={__name:"ListUsers",props:{users:Array,roles:Array,permissions:Array,me:Object},setup(h){const n=h,x=k().props.auth.user,b=n.users.map(i=>i.permissions).flat(),m=g(null),y=g(null),p=g({});console.log("Yo merengues",x),console.log("Usuarios",n.users),console.log("Usuario con roles)",n.users.roles),console.log("Permisos de usuarios",b),console.log("Roles",n.roles);const f=(i,r)=>{console.log(`Actualizar rol para el usuario ${i} al rol ${r}`),C.post(route("/Role/Update"),{user_id:i,role:r},{onSuccess:()=>{A().success("Rol actualizado con éxito"),console.log("Rol actualizado con éxito")},onError:o=>{console.error("Error al actualizar el rol:",o)}})};return(i,r)=>(t(),s("div",U,[e("table",z,[r[1]||(r[1]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rol "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Permisos ")])],-1)),e("tbody",P,[(t(!0),s(c,null,d(n.users,o=>(t(),s("tr",{key:o.id},[e("td",E,[w(u(o.name)+" ",1),o.id===R(x).id?(t(),s("span",B,"(Tú)")):_("",!0)]),e("td",N,u(o.email),1),e("td",T,[(t(!0),s(c,null,d(o.roles,l=>(t(),s("div",{key:l.id,class:"grid grid-cols-1 gap-2"},[e("select",{onChange:a=>{m.value=o.id,y.value=l.id,p.value.value=a.target.value,console.log("Rol seleccionado:",p.value.value,"Para el usuario:",o.id)}},[e("option",$,u(l.name),1),(t(!0),s(c,null,d(n.roles.filter(a=>!o.roles.some(v=>v.id===a.id)),a=>(t(),s("option",{key:a.id,value:a.name},u(a.name),9,F))),128))],40,V),m.value===o.id&&y.value===l.id?(t(),s("button",{key:0,class:"p-2 bg-blue-500 hover:bg-blue-800 transform duration-300 text-white rounded text-sm",onClick:a=>f(o.id,p.value.value)}," Guardar Cambios ",8,L)):_("",!0)]))),128))]),e("td",S,[e("ul",null,[(t(!0),s(c,null,d(o.roles,l=>(t(),s("li",{key:l.id,class:"grid grid-cols-1 2xl:grid-cols-3 gap-2"},[l.name==="Admin"?(t(),s("span",j,"All")):(t(!0),s(c,{key:1},d(l.permissions,a=>(t(),s("span",{onChange:r[0]||(r[0]=()=>{}),key:a.id,class:"font-extrabold text-sm p-2 rounded-xl text-center uppercase bg-green-300 text-green-600"},u(a.name),33))),128))]))),128))])])]))),128))])])]))}};export{G as default};
