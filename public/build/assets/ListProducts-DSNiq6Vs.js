import{m as x,g as u,o as c,b as t,a as l,e as $,F as w,x as y,t as d,w as v,k as n,f as b,p as i,z as k,q as C,s as g}from"./app-1_flsrAA.js";import{_ as D}from"./Modal-AXOU4J0g.js";import{_ as M}from"./StatusBadge-DlxYni6K.js";import{_ as a}from"./InputLabel-BWt_JfsC.js";import{C as N}from"./CancelButton-CCxJaZaK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"bg-white p-4 rounded-2xl"},B={class:"w-full mt-2 border"},I={class:"border p-2 text-center"},F={class:"border p-2 text-center"},z=["src"],A={class:"border p-2 text-center"},G={class:"border p-2 text-center"},T={class:"border p-2 text-center"},q={class:"border p-2 text-center"},K={class:"border p-2 text-center"},L={class:"border p-2 text-center"},O={class:"border p-2 flex gap-2 justify-center"},J=["onClick"],R=["onClick"],H={class:"p-6"},Q={class:"flex-col"},W={class:"text-center"},X={class:"pr-4 border-r flex flex-col items-center justify-evenly border-dashed border-2 border-gray-300 self-center p-6"},Y={class:"grid grid-cols-2 gap-4 mt-4"},Z=["value"],ee={class:"flex justify-between mt-2"},ne={__name:"ListProducts",props:{products:Object,categories:Object},setup(h){const f=h,p=x(!1),s=x({}),m=x(null),P=r=>{m.value=r.target.files[0],console.log("Selected image file:",m.value)};function E(r){p.value=!0;const e=f.products.find(o=>o.id===r);s.value={...e},console.log(e.name)}function _(){p.value=!1}const S=r=>{const e=new FormData;e.append("category_id",s.value.category_id??""),e.append("name",s.value.name??""),e.append("sku",s.value.sku??""),e.append("description",s.value.description??""),e.append("price",s.value.price??""),e.append("cost",s.value.cost??""),e.append("tax",s.value.tax??""),e.append("is_active",s.value.is_active),m.value&&e.append("image",m.value),C.post(`/Menu/edit/${r}`,e,{onSuccess:()=>{g().success("Producto Actualizado Correctamente."),_(),s.value={}},onError:o=>{g().error("El producto no se pudo actualizar"),console.error("El producto no se Actualizó. ",o)}})},U=r=>{confirm("Estás seguro que quieres Elimar este Producto?")&&C.delete(`/Menu/${r}`,{onSuccess:()=>{g().success("Producto Eliminado Correctamente.")},onError:e=>{g().error("El producto no se pudo eliminar"),console.error("El producto no se Eliminó. ",e)}})};return(r,e)=>(c(),u(w,null,[t("div",j,[t("form",{onSubmit:e[0]||(e[0]=$((...o)=>r.searchTable&&r.searchTable(...o),["prevent"]))},[...e[11]||(e[11]=[t("input",{type:"text",placeholder:"Buscar Producto...",class:"border p-2 rounded-lg w-full mb-4"},null,-1)])],32),t("table",B,[e[14]||(e[14]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"p-4"},"Categoría"),t("th",{class:"p-4"},"Imagen"),t("th",{class:"p-4"},"Nombre"),t("th",{class:"p-4"},"SKU"),t("th",{class:"p-4"},"Precio"),t("th",{class:"p-4"},"Disponible"),t("th",{class:"p-4"},"Fecha de Creación"),t("th",{class:"p-4"},"Fecha de Actualización"),t("th",{class:"p-4"},"Acciones")])],-1)),t("tbody",null,[(c(!0),u(w,null,y(f.products,o=>(c(),u("tr",{key:o.id},[t("td",I,d(o.category_id),1),t("td",F,[t("img",{src:o.image,alt:"Product Image",class:"w-16 h-16 object-cover mx-auto"},null,8,z)]),t("td",A,d(o.name),1),t("td",G,d(o.sku.slice(4,10)),1),t("td",T,"$ "+d(o.price),1),t("td",q,[l(M,{status:o.is_active?"Activo":"Inactivo"},null,8,["status"])]),t("td",K,d(o.created_at.slice(0,10)),1),t("td",L,d(o.updated_at.slice(0,10)),1),t("td",O,[t("button",{onClick:V=>E(o.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...e[12]||(e[12]=[t("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,J),t("button",{onClick:V=>U(o.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...e[13]||(e[13]=[t("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,R)])]))),128))])])]),l(D,{show:p.value,"onUpdate:show":e[10]||(e[10]=o=>p.value=o)},{default:v(()=>[t("div",H,[e[22]||(e[22]=t("h3",{class:"text-lg font-bold mb-4"},"Editar Producto",-1)),t("form",Q,[t("div",W,[l(a,{for:"image",value:"Imagen del Producto"}),t("div",X,[t("input",{onChange:P,id:"image",type:"file",accept:"image/png, image/jpeg",class:"mt-2"},null,32)]),e[15]||(e[15]=t("span",{class:"text-sm text-gray-500 mt-2"},"(Solo archivos PNG o JPG)",-1))]),t("div",Y,[t("div",null,[l(a,{for:"name",class:"block text-sm font-medium text-black mb-2"},{default:v(()=>[...e[16]||(e[16]=[b("Nombre",-1)])]),_:1}),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.name=o),type:"text",placeholder:"Nombre",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[i,s.value.name]])]),t("div",null,[l(a,{for:"categories",value:"Categoría",class:"mb-2"}),n(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.category_id=o),type:"text",placeholder:"",class:"border rounded-lg mb-2 w-full"},[e[17]||(e[17]=t("option",{value:""},"Selecciona un Categoría",-1)),(c(!0),u(w,null,y(f.categories,o=>(c(),u("option",{key:o.id,value:o.id},d(o.name),9,Z))),128))],512),[[k,s.value.category_id]])]),t("div",null,[l(a,{for:"description",value:"Descripción"}),n(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.description=o),placeholder:"Descripción",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[i,s.value.description]])]),t("div",null,[l(a,{for:"sku",value:"SKU"}),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.sku=o),type:"text",placeholder:"SKU",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[i,s.value.sku]])]),t("div",null,[l(a,{for:"price",value:"Precio"}),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.price=o),type:"number",placeholder:"Precio",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[i,s.value.price]])]),t("div",null,[l(a,{for:"cost",value:"Costo"}),n(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.cost=o),type:"number",placeholder:"Costo",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[i,s.value.cost]])]),t("div",null,[l(a,{class:"block text-sm font-medium text-black"},{default:v(()=>[...e[18]||(e[18]=[b("Disponible",-1)])]),_:1}),n(t("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.is_active=o),class:"border p-2 rounded-lg w-full mb-2"},[...e[19]||(e[19]=[t("option",{value:"",disabled:"",selected:""}," Selecciona una opción ",-1),t("option",{value:"1"},"Sí",-1),t("option",{value:"0"},"No",-1)])],512),[[k,s.value.is_active]])]),t("div",null,[l(a,{for:"tax",value:"Impuesto"}),n(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.value.tax=o),type:"number",placeholder:"Impuesto",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[i,s.value.tax]])])]),t("div",ee,[l(N,{onClick:_},{default:v(()=>[...e[20]||(e[20]=[b("Cancelar",-1)])]),_:1}),t("button",{onClick:e[9]||(e[9]=o=>S(s.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end uppercase flex items-center text-sm font-bold"},[...e[21]||(e[21]=[t("img",{src:"/assets/icons/svg/actions/save.svg",class:"w-8 inline-flex mr-2",alt:"Guardar Cambios"},null,-1),b("Guardar Cambios ",-1)])])])])])]),_:1},8,["show"])],64))}};export{ne as default};
