import{r as p,j as N,g as i,o as d,b as s,a as r,k as u,q as b,i as y,d as w,F as h,s as L,t as f,w as C,B as M,f as U,S as T,x as _,y as v}from"./app-DbiGUJdc.js";import{_ as P}from"./Modal-CV1eb-om.js";import{_ as z}from"./StatusBadge-C0_8Z20v.js";import{C as O}from"./CancelButton-gLrk5CxZ.js";import{_ as g}from"./InputError-Z7ONOJ8U.js";import{_ as x}from"./InputLabel-GhMHpUAM.js";import{i as E}from"./isAdmin-DVsfzEus.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"bg-white p-4 rounded-2xl w-full max-w-96 sm:max-w-[40rem] lg:max-w-full mx-auto"},A={class:"overflow-y-auto lg:py-60 lg:h-screen lg:pt-0 scrollbar-hide"},D={class:"w-full mt-2 border"},F={class:"bg-gray-100"},G={key:0,class:"p-4"},H={class:"border p-2 text-center"},Q={class:"border p-2 text-center"},I={class:"border p-2 text-center"},J={class:"border p-2 text-center"},K={class:"border p-2 text-center"},W={key:0,class:"border p-2 flex gap-2 justify-center"},X=["onClick"],Y=["onClick"],Z={class:"p-6"},ee={class:"flex flex-col"},se={class:"flex justify-between"},te={class:"flex justify-between"},me={__name:"ListRooms",props:{rooms:Object},setup(B){const m=p({errors:{}}),l=B;console.log("ROOMS:",l.rooms);const n=p(!1),o=p({}),R=()=>{n.value=!1},k=a=>{const e=l.rooms.find(t=>t.id===a);o.value=e?{...e}:{id:a,number:"",status:"",capacity:""},n.value=!0},S=a=>{var e;if(o.value.number===((e=l.rooms.find(t=>t.number===o.value.number&&t.id!==a))==null?void 0:e.number)){document.querySelector(".text-red-500").classList.remove("hidden");return}_.put(`/Rooms/edit/${a}`,o.value,{onSuccess:()=>{v().success("Habitación actualizada exitosamente"),n.value=!1},onError:t=>{v().error("Error al actualizar la habitación"),console.error("Error al actualizar habitación:",t)}})},V=a=>{T.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar habitación",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&_.delete(`/Rooms/${a}`,{onSuccess:()=>{v().success("habitación eliminada exitosamente")},onError:t=>{v().error("Error al eliminar habitación"),console.error("Error al eliminar habitación:",t)}})})},c=p(""),$=N(()=>c.value?l.rooms.filter(a=>a.number.toString().includes(c.value)):l.rooms);return(a,e)=>(d(),i(h,null,[s("div",q,[u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),type:"text",placeholder:"Buscar habitación...",class:"border p-2 rounded-lg w-full mb-4"},null,512),[[b,c.value]]),s("div",A,[s("table",D,[s("thead",null,[s("tr",F,[e[7]||(e[7]=s("th",{class:"p-4"},"#",-1)),e[8]||(e[8]=s("th",{class:"p-4"},"Prefijo",-1)),e[9]||(e[9]=s("th",{class:"p-4"},"Número",-1)),e[10]||(e[10]=s("th",{class:"p-4"},"Estado",-1)),e[11]||(e[11]=s("th",{class:"p-4"},"Capacidad",-1)),w(E)()?(d(),i("th",G,"Acciones")):y("",!0)])]),s("tbody",null,[(d(!0),i(h,null,L($.value,t=>(d(),i("tr",{key:t.id},[s("td",H,f(t.id),1),s("td",Q,f(t.prefix),1),s("td",I,f(t.number),1),s("td",J,[r(z,{status:t.status},null,8,["status"])]),s("td",K,f(t.capacity)+" Personas ",1),w(E)()&&t.status==="Libre"||t.status==="Reservada"?(d(),i("td",W,[s("button",{onClick:j=>k(t.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...e[12]||(e[12]=[s("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,X),s("button",{onClick:j=>V(t.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...e[13]||(e[13]=[s("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,Y)])):y("",!0)]))),128))])])])]),r(P,{show:n.value,"onUpdate:show":e[6]||(e[6]=t=>n.value=t)},{default:C(()=>[s("div",Z,[e[17]||(e[17]=s("h3",{class:"text-lg font-bold mb-4"},"Editar Categoría",-1)),s("form",ee,[s("div",null,[r(x,{for:"number",value:"Número de habitación",class:"mb-2"}),u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.number=t),type:"text",placeholder:"Numero de habitación",class:"border p-2 rounded-lg mb-4 w-full"},null,512),[[b,o.value.number]]),r(g,{message:m.value.errors.number},null,8,["message"]),e[14]||(e[14]=s("span",{class:"text-red-500 hidden"},"Este número de habitación ya está en uso.",-1))]),s("div",se,[s("div",null,[r(x,{for:"prefix",value:"Prefijo",class:"m-2"}),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.prefix=t),type:"text",placeholder:"Prefijo",class:"border p-2 rounded-lg mb-4"},null,512),[[b,o.value.prefix]]),r(g,{message:m.value.errors.prefix},null,8,["message"])]),s("div",null,[r(x,{for:"status",value:"Estado",class:"m-2"}),u(s("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.status=t),class:"border p-2 rounded-lg mb-4"},[...e[15]||(e[15]=[s("option",{value:"",disabled:"",selected:""}," Selecciona un estado ",-1),s("option",{value:"Libre"},"Libre",-1),s("option",{value:"Reservada"},"Reservada",-1)])],512),[[M,o.value.status]]),r(g,{message:m.value.errors.status},null,8,["message"])]),s("div",null,[r(x,{for:"capacity",value:"Capacidad",class:"m-2"}),u(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.capacity=t),type:"text",placeholder:"Capacidad",class:"border p-2 rounded-lg mb-4"},null,512),[[b,o.value.capacity]]),r(g,{message:m.value.errors.capacity},null,8,["message"])])]),s("div",te,[r(O,{onClick:R},{default:C(()=>[...e[16]||(e[16]=[U("Cancelar",-1)])]),_:1}),s("button",{onClick:e[5]||(e[5]=t=>S(o.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end"}," Guardar Cambios ")])])])]),_:1},8,["show"])],64))}};export{me as default};
