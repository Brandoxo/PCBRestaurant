import{_ as x}from"./StatusBadge-AoORV9Do.js";import{z as f,j as v,g as n,o as d,i as c,b as e,t as r,a as p,f as b,D as y,S as i,x as h}from"./app-DMZtkmGL.js";const w={key:0,class:"bg-white shadow-md rounded-lg p-2 px-4 w-3/4 lg:w-full mt-4 mx-auto hover:scale-[1.02] transition-all transform ease-in-out duration-300"},C={key:0,class:"flex bg-red-100 text-center text-red-600 py-1 rounded-full text-sm font-semibold w-full mt-2 lg:mt-0"},k={class:"mx-auto"},_={key:1,class:"flex bg-approveGreen/30 text-center text-approveGreen py-1 rounded-full text-sm font-semibold w-full mt-2 lg:mt-0"},B={class:"lg:flex justify-between items-center mx-auto"},S={class:"md:text-lg lg:text-xl"},E={class:"font-extrabold"},N={class:"flex items-center justify-between gap-4 mt-4"},O={class:"flex-col"},D={class:"text-center text-3xl font-bold"},V={class:"flex text-sm mt-2"},j={class:"text-center text-secondary"},T={class:"text-center text-secondary"},z={class:"gap-2 text-center"},I={class:"text-center text-midBlue font-bold"},L={key:1,class:"mx-auto w-3/4 bg-white rounded-lg p-4 mt-4"},$={__name:"SelectedOrder",props:{order:Object},setup(t){const o=f().props.auth.user,l=t;console.log("order in:",l.order);const u=()=>{i.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cancelar orden",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&(m(),i.fire("¡Cancelada!","La orden ha sido cancelada.","success"))})},m=async()=>{try{await h.post(`/orders/update/${l.order.id}`,{status:"Cancelada",user_name:o.name},{preserveState:!0,onSuccess:()=>{l.order.status="Cancelada",console.log("Orden cancelada")},onError:a=>{console.error("Error al cancelar la orden:",a)}})}catch(a){console.error("Error en la solicitud:",a)}},g=v(()=>o&&o.permissions&&o.permissions.includes("cancel orders"));return console.log("User permissions:",o?o.permissions:"No user"),(a,s)=>t.order?(d(),n("div",w,[t.order.status==="Cancelada"?(d(),n("div",C,[e("span",k," Cancelada por "+r(t.order.cancelled_by??"Admin"),1)])):c("",!0),t.order.status==="Completada"?(d(),n("div",_,[...s[0]||(s[0]=[e("span",{class:"mx-auto"}," Venta Finalizada ",-1)])])):c("",!0),e("div",B,[e("h2",S,[s[1]||(s[1]=b(" Orden ",-1)),e("span",E,"ID # "+r(t.order.id??"0000"),1),s[2]||(s[2]=e("img",{src:"assets/icons/svg/links/copy.svg",alt:"Copy Icon",class:"inline w-6 ml-2 cursor-pointer"},null,-1))]),p(x,{class:""})]),e("div",N,[e("div",O,[e("h2",D," Mesa "+r(t.order.table.number??"7"),1),e("div",V,[e("p",j,r(t.order.date_time?new Date(t.order.date_time).toLocaleTimeString().slice(0,-1):"-"),1),e("p",T,r(t.order.date_time?new Date(t.order.date_time).toLocaleDateString():"-"),1)])]),t.order.status==="En curso"&&g.value?(d(),n("button",{key:0,onClick:u,class:"mt-4 bg-dangerRed/30 max-w-96 p-2 rounded-md w-full uppercase text-dangerRed tracking-widest font-extrabold hover:bg-dangerRed/50 transition"}," Cancelar ")):c("",!0),e("button",z,[s[3]||(s[3]=e("img",{src:"assets/icons/svg/links/sheet.svg",alt:"Imagen de la orden",class:"w-6 mx-auto"},null,-1)),s[4]||(s[4]=e("p",{class:"text-center text-midBlue font-bold"}," Export ",-1)),e("p",I," #"+r(t.order.id??""),1)])])])):(d(),n("div",L,[...s[5]||(s[5]=[y('<div class="flex animate-pulse space-x-4"><div class="size-10 rounded-full bg-gray-200"></div><div class="flex-1 space-y-6 py-1"><div class="h-2 rounded bg-gray-200"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="col-span-2 h-2 rounded bg-gray-200"></div><div class="col-span-1 h-2 rounded bg-gray-200"></div></div><div class="h-2 rounded bg-gray-200"></div></div></div></div>',1)])]))}};export{$ as default};
