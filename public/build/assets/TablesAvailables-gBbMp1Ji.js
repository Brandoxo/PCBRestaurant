import{g as i,o as l,p as L,J as S,j,l as O,F as C,s as M,k as N,E as B,n as g,b as n,i as E,a as _,t as u,d as H,f as m,w as V,y as x}from"./app-DbiGUJdc.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as A}from"./StatusBadge-C0_8Z20v.js";import{i as h}from"./isRoomServiceEnabled-ChMRkMiO.js";const F={},G={class:"text-center w-full bg-green-900/80 p-4 rounded-xl text-white font-black uppercase text-sm border border-transparent tracking-widest transition duration-150 ease-in-out hover:bg-gray-700 focus:bg-red-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 active:bg-gray-900"};function U(b,p){return l(),i("button",G,[L(b.$slots,"default")])}const q=D(F,[["render",U]]),y={class:"flex justify-evenly items-center mb-4 gap-8"},z={class:"text-m uppercase font-black"},J=["src","alt"],I={class:"font-extrabold text-xl text-red-900"},K={key:0,class:"flex justify-center items-center gap-2"},P={class:"text-center text-gray-500"},Q={class:"font-bold text-lg text-gray-600"},k={__name:"TablesAvailables",props:{tables:Object,selectedTable:Object,rooms:Object},emits:["tableSelected"],setup(b,{emit:p}){const w=p,a=b;console.log("Aqui tan las rooms sr",a.rooms);const c=h,{tables:$,rooms:R}=S(a),f=j(()=>{const e=$.value||{},s=R.value||{},t=c&&c.value!==void 0?c.value:!!c,r=Object.keys(e).map(o=>({...e[o]||{},ui_id:`table-${e[o]&&(e[o].id||o)||o}`,isRoom:!1,label:e[o]&&e[o].room&&e[o].room.name?e[o].room.name:"Mesa"})),d=t?Object.keys(s).map(o=>({...s[o]||{},ui_id:`room-${s[o]&&(s[o].id||o)||o}`,isRoom:!0,label:s[o].name||`Habitación ${s[o].number||o}`,number:s[o].number||s[o].name||"",capacity:s[o].capacity||1,status:s[o].status||"Libre"})):[];return[...r,...d]});console.log("Lista combinada",f.value);function T(e){const s=e.isRoom?"Habitación":"Mesa";if(e.status!=="Libre"&&e.status!=="Reservada"){x().error(`No puedes seleccionar una ${e.isRoom?"habitación":"mesa"} ocupada.`);return}w("tableSelected",e),window.scrollTo({top:0,behavior:"smooth"}),x().info(`Seleccionando orden para la ${s} #${e.number}`),console.log("Selection data:",e)}const v=e=>{var r,d;if(!a.selectedTable)return!1;const s=((r=a.selectedTable)==null?void 0:r.ui_id)||((d=a.selectedTable)!=null&&d.id?`table-${a.selectedTable.id}`:null),t=(e==null?void 0:e.ui_id)||(e!=null&&e.id?`table-${e.id}`:null);return s&&t?s!==t:!1};return O(()=>{console.log("Tables data:",a.tables)}),(e,s)=>(l(),i("div",{class:g([a.selectedTable?"animate-pulse pointer-events-none transition-transform duration-300 ease-in-out min-w-80 2xl:w-1/4":"grid sm:grid-cols-2  lg:grid-cols-3 2xl:grid-cols-4 gap-6 2xl:gap-10 overflow-y-auto scrollbar-hide scroll-smooth w-full"])},[(l(!0),i(C,null,M(f.value,t=>N((l(),i("div",{key:t.ui_id||`table-${t.id}`,class:g(["bg-white rounded-xl items-center p-4 space-y-2 shadow-lg",t.status!=="Libre"&&t.status!=="Reservada"?"opacity-50 pointer-events-none scale-90":"cursor-pointer hover:scale-[1.02] pointer-events-auto",a.selectedTable&&(a.selectedTable.ui_id||`table-${a.selectedTable.id}`)===(t.ui_id||`table-${t.id}`)?"pointer-events-auto":""])},[n("div",null,[_(A,{status:t.status},null,8,["status"])]),n("div",y,[n("h2",z,u(t.isRoom?"Habitación":"Mesa"),1),n("img",{src:t.isRoom?"/assets/icons/svg/menu/rooms.svg":"/assets/icons/svg/menu/table.svg",alt:t.isRoom?"Habitación":"Mesa",class:"w-16"},null,8,J),n("span",I,"#"+u(H(h)?t.prefix:"")+"-"+u(t.number),1)]),t.isRoom?E("",!0):(l(),i("div",K,[s[2]||(s[2]=n("img",{src:"/assets/icons/svg/visual/people.svg",alt:"Capacidad",class:"inline-block w-4 h-4"},null,-1)),n("p",P,[s[0]||(s[0]=m(" Capacidad para ",-1)),n("span",Q,u(t.capacity),1),s[1]||(s[1]=m(" personas ",-1))])])),_(q,{onClick:r=>T(t),disabled:t.status!=="Libre"&&t.status!=="Reservada"},{default:V(()=>[...s[3]||(s[3]=[m(" Generar Orden ",-1)])]),_:2},1032,["onClick","disabled"])],2)),[[B,!v(t)]])),128))],2))}};export{k as default};
