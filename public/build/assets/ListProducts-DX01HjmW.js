import{m as g,j as $,g as u,o as c,b as t,a as r,e as j,k as a,p as d,F as C,q as k,t as i,w as f,f as x,A as y,S as D,s as _,x as w}from"./app-BTgeQ286.js";import{_ as M}from"./Modal-mkrzPAHm.js";import{_ as I}from"./StatusBadge-C11AFT7S.js";import{_ as n}from"./InputLabel-DLboylzN.js";import{C as T}from"./CancelButton-CNWsG1GZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"bg-white p-4 rounded-2xl"},F={class:"w-full mt-2 border"},G={class:"border p-2 text-center"},z={class:"border p-2 text-center hidden lg:block"},L=["src"],K={class:"border p-2 text-center"},O={class:"border p-2 text-center hidden lg:block"},q={class:"border p-2 text-center"},J={class:"border p-2 text-center"},Q={class:"border p-2 text-center hidden lg:block"},R={class:"border p-2 text-center"},H={class:"border p-2 flex gap-2 justify-center"},W=["onClick"],X=["onClick"],Y={class:"p-6"},Z={class:"flex-col"},ee={class:"text-center"},te={class:"pr-4 border-r flex flex-col items-center justify-evenly border-dashed border-2 border-gray-300 self-center p-6"},oe={class:"grid grid-cols-2 gap-4 mt-4"},le=["value"],se={class:"flex justify-between mt-2"},ce={__name:"ListProducts",props:{products:Object,categories:Object},setup(P){const p=P,m=g(!1),l=g({}),v=g(null),S=s=>{v.value=s.target.files[0],console.log("Selected image file:",v.value)};function U(s){m.value=!0;const e=p.products.find(o=>o.id===s);l.value={...e},console.log(e.name)}function h(){m.value=!1}const E=s=>{const e=new FormData;e.append("category_id",l.value.category_id??""),e.append("name",l.value.name??""),e.append("sku",l.value.sku??""),e.append("description",l.value.description??""),e.append("price",l.value.price??""),e.append("cost",l.value.cost??""),e.append("tax",l.value.tax??""),e.append("is_active",l.value.is_active),v.value&&e.append("image",v.value),_.post(`/Menu/edit/${s}`,e,{onSuccess:()=>{w().success("Producto Actualizado Correctamente."),h(),l.value={}},onError:o=>{w().error("El producto no se pudo actualizar"),console.error("El producto no se Actualizó. ",o)}})},B=s=>{D.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&_.delete(`/Menu/${s}`,{onSuccess:()=>{w().success("Producto Eliminado Correctamente."),l.value={}},onError:o=>{w().error("El producto no se pudo eliminar"),console.error("El producto no se Eliminó. ",o)}})})},b=g(""),V=$(()=>b.value?p.products.filter(s=>s.name.toLowerCase().includes(b.value.toLowerCase())):p.products);return(s,e)=>(c(),u(C,null,[t("div",A,[t("form",{onSubmit:e[1]||(e[1]=j((...o)=>s.searchTable&&s.searchTable(...o),["prevent"]))},[a(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),type:"text",placeholder:"Buscar Producto...",class:"border p-2 rounded-lg w-full mb-4"},null,512),[[d,b.value]])],32),t("table",F,[e[14]||(e[14]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"p-4"},"Categoría"),t("th",{class:"p-4 hidden lg:block"},"Imagen"),t("th",{class:"p-4"},"Nombre"),t("th",{class:"p-4 hidden lg:block"},"SKU"),t("th",{class:"p-4"},"Precio"),t("th",{class:"p-4"},"Disponible"),t("th",{class:"p-4 hidden lg:block"},"Fecha de Creación"),t("th",{class:"p-4"},"Fecha de Actualización"),t("th",{class:"p-4"},"Acciones")])],-1)),t("tbody",null,[(c(!0),u(C,null,k(V.value,o=>(c(),u("tr",{key:o.id},[t("td",G,i(o.category_id),1),t("td",z,[t("img",{src:o.image,alt:"Product Image",class:"w-16 h-16 object-cover mx-auto"},null,8,L)]),t("td",K,i(o.name),1),t("td",O,i(o.sku.slice(4,10)),1),t("td",q,"$ "+i(o.price),1),t("td",J,[r(I,{status:o.is_active?"Activo":"Inactivo"},null,8,["status"])]),t("td",Q,i(o.created_at.slice(0,10)),1),t("td",R,i(o.updated_at.slice(0,10)),1),t("td",H,[t("button",{onClick:N=>U(o.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...e[12]||(e[12]=[t("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,W),t("button",{onClick:N=>B(o.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...e[13]||(e[13]=[t("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,X)])]))),128))])])]),r(M,{show:m.value,"onUpdate:show":e[11]||(e[11]=o=>m.value=o)},{default:f(()=>[t("div",Y,[e[22]||(e[22]=t("h3",{class:"text-lg font-bold mb-4"},"Editar Producto",-1)),t("form",Z,[t("div",ee,[r(n,{for:"image",value:"Imagen del Producto"}),t("div",te,[t("input",{onChange:S,id:"image",type:"file",accept:"image/png, image/jpeg",class:"mt-2"},null,32)]),e[15]||(e[15]=t("span",{class:"text-sm text-gray-500 mt-2"},"(Solo archivos PNG o JPG)",-1))]),t("div",oe,[t("div",null,[r(n,{for:"name",class:"block text-sm font-medium text-black mb-2"},{default:f(()=>[...e[16]||(e[16]=[x("Nombre",-1)])]),_:1}),a(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.name=o),type:"text",placeholder:"Nombre",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[d,l.value.name]])]),t("div",null,[r(n,{for:"categories",value:"Categoría",class:"mb-2"}),a(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.category_id=o),type:"text",placeholder:"",class:"border rounded-lg mb-2 w-full"},[e[17]||(e[17]=t("option",{value:""},"Selecciona un Categoría",-1)),(c(!0),u(C,null,k(p.categories,o=>(c(),u("option",{key:o.id,value:o.id},i(o.name),9,le))),128))],512),[[y,l.value.category_id]])]),t("div",null,[r(n,{for:"description",value:"Descripción"}),a(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.description=o),placeholder:"Descripción",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[d,l.value.description]])]),t("div",null,[r(n,{for:"sku",value:"SKU"}),a(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.sku=o),type:"text",placeholder:"SKU",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[d,l.value.sku]])]),t("div",null,[r(n,{for:"price",value:"Precio"}),a(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.price=o),type:"number",placeholder:"Precio",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[d,l.value.price]])]),t("div",null,[r(n,{for:"cost",value:"Costo"}),a(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.cost=o),type:"number",placeholder:"Costo",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[d,l.value.cost]])]),t("div",null,[r(n,{class:"block text-sm font-medium text-black"},{default:f(()=>[...e[18]||(e[18]=[x("Disponible",-1)])]),_:1}),a(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.is_active=o),class:"border p-2 rounded-lg w-full mb-2"},[...e[19]||(e[19]=[t("option",{value:"",disabled:"",selected:""}," Selecciona una opción ",-1),t("option",{value:"1"},"Sí",-1),t("option",{value:"0"},"No",-1)])],512),[[y,l.value.is_active]])]),t("div",null,[r(n,{for:"tax",value:"Impuesto"}),a(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.tax=o),type:"number",placeholder:"Impuesto",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[d,l.value.tax]])])]),t("div",se,[r(T,{onClick:h},{default:f(()=>[...e[20]||(e[20]=[x("Cancelar",-1)])]),_:1}),t("button",{onClick:e[10]||(e[10]=o=>E(l.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end uppercase flex items-center text-sm font-bold"},[...e[21]||(e[21]=[t("img",{src:"/assets/icons/svg/actions/save.svg",class:"w-8 inline-flex mr-2",alt:"Guardar Cambios"},null,-1),x("Guardar Cambios ",-1)])])])])])]),_:1},8,["show"])],64))}};export{ce as default};
