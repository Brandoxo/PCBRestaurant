import{r as g,j as M,g as d,o as i,b as t,a as r,e as I,k as n,q as u,i as C,d as h,F as y,s as _,t as c,w as f,f as x,B as P,S as T,x as S,y as w}from"./app-CnN0QQFD.js";import{_ as A}from"./Modal-DCFLc0-E.js";import{_ as F}from"./StatusBadge-TAxfT9rL.js";import{_ as a}from"./InputLabel-CkfpSaVR.js";import{C as G}from"./CancelButton-BnAM3seS.js";import{i as U}from"./isAdmin-DQD_zkpv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"bg-white p-4 rounded-2xl w-full max-w-96 sm:max-w-[40rem] lg:max-w-full mx-auto"},L={class:"overflow-y-auto lg:py-60 lg:h-screen lg:pt-0 scrollbar-hide"},K={class:"w-full mt-2 border"},O={class:"bg-gray-100"},q={key:0,class:"p-4"},J={class:"border p-2 text-center"},Q={class:"border p-2 text-center hidden lg:block"},R=["src"],H={class:"border p-2 text-center"},W={class:"border p-2 text-center hidden lg:block"},X={class:"border p-2 text-center"},Y={class:"border p-2 text-center"},Z={class:"border p-2 text-center hidden lg:block"},ee={class:"border p-2 text-center"},te={key:0,class:"border p-2 flex gap-2 justify-center"},oe=["onClick"],le=["onClick"],se={class:"p-6"},re={class:"flex-col"},ne={class:"text-center"},ae={class:"pr-4 border-r flex flex-col items-center justify-evenly border-dashed border-2 border-gray-300 self-center p-6"},de={class:"grid grid-cols-2 gap-4 mt-4"},ie=["value"],ue={class:"flex justify-between mt-2"},xe={__name:"ListProducts",props:{products:Object,categories:Object},setup(B){const p=B,m=g(!1),l=g({}),v=g(null),E=s=>{v.value=s.target.files[0],console.log("Selected image file:",v.value)};function V(s){m.value=!0;const e=p.products.find(o=>o.id===s);l.value={...e},console.log(e.name)}function k(){m.value=!1}const N=s=>{const e=new FormData;e.append("category_id",l.value.category_id??""),e.append("name",l.value.name??""),e.append("sku",l.value.sku??""),e.append("description",l.value.description??""),e.append("price",l.value.price??""),e.append("cost",l.value.cost??""),e.append("tax",l.value.tax??""),e.append("is_active",l.value.is_active),v.value&&e.append("image",v.value),S.post(`/Menu/edit/${s}`,e,{onSuccess:()=>{w().success("Producto Actualizado Correctamente."),k(),l.value={}},onError:o=>{w().error("El producto no se pudo actualizar"),console.error("El producto no se Actualizó. ",o)}})},$=s=>{T.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&S.delete(`/Menu/${s}`,{onSuccess:()=>{w().success("Producto Eliminado Correctamente."),l.value={}},onError:o=>{w().error("El producto no se pudo eliminar"),console.error("El producto no se Eliminó. ",o)}})})},b=g(""),j=M(()=>b.value?p.products.filter(s=>s.name.toLowerCase().includes(b.value.toLowerCase())):p.products);return(s,e)=>(i(),d(y,null,[t("div",z,[t("form",{onSubmit:e[1]||(e[1]=I((...o)=>s.searchTable&&s.searchTable(...o),["prevent"]))},[n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),type:"text",placeholder:"Buscar Producto...",class:"border p-2 rounded-lg w-full mb-4"},null,512),[[u,b.value]])],32),t("div",L,[t("table",K,[t("thead",null,[t("tr",O,[e[12]||(e[12]=t("th",{class:"p-4"},"Categoría",-1)),e[13]||(e[13]=t("th",{class:"p-4 hidden lg:block"},"Imagen",-1)),e[14]||(e[14]=t("th",{class:"p-4"},"Nombre",-1)),e[15]||(e[15]=t("th",{class:"p-4 hidden lg:block"},"SKU",-1)),e[16]||(e[16]=t("th",{class:"p-4"},"Precio",-1)),e[17]||(e[17]=t("th",{class:"p-4"},"Disponible",-1)),e[18]||(e[18]=t("th",{class:"p-4 hidden lg:block"},"Fecha de Creación",-1)),e[19]||(e[19]=t("th",{class:"p-4"},"Fecha de Actualización",-1)),h(U)()?(i(),d("th",q,"Acciones")):C("",!0)])]),t("tbody",null,[(i(!0),d(y,null,_(j.value,o=>(i(),d("tr",{key:o.id},[t("td",J,c(o.category_id),1),t("td",Q,[t("img",{src:o.image,alt:"Product Image",class:"w-16 h-16 object-cover mx-auto"},null,8,R)]),t("td",H,c(o.name),1),t("td",W,c(o.sku.slice(4,10)),1),t("td",X," $ "+c(o.price),1),t("td",Y,[r(F,{status:o.is_active?"Activo":"Inactivo"},null,8,["status"])]),t("td",Z,c(o.created_at.slice(0,10)),1),t("td",ee,c(o.updated_at.slice(0,10)),1),h(U)()?(i(),d("td",te,[t("button",{onClick:D=>V(o.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...e[20]||(e[20]=[t("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,oe),t("button",{onClick:D=>$(o.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...e[21]||(e[21]=[t("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,le)])):C("",!0)]))),128))])])])]),r(A,{show:m.value,"onUpdate:show":e[11]||(e[11]=o=>m.value=o)},{default:f(()=>[t("div",se,[e[29]||(e[29]=t("h3",{class:"text-lg font-bold mb-4"},"Editar Producto",-1)),t("form",re,[t("div",ne,[r(a,{for:"image",value:"Imagen del Producto"}),t("div",ae,[t("input",{onChange:E,id:"image",type:"file",accept:"image/png, image/jpeg",class:"mt-2"},null,32)]),e[22]||(e[22]=t("span",{class:"text-sm text-gray-500 mt-2"},"(Solo archivos PNG o JPG)",-1))]),t("div",de,[t("div",null,[r(a,{for:"name",class:"block text-sm font-medium text-black mb-2"},{default:f(()=>[...e[23]||(e[23]=[x("Nombre",-1)])]),_:1}),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.name=o),type:"text",placeholder:"Nombre",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,l.value.name]])]),t("div",null,[r(a,{for:"categories",value:"Categoría",class:"mb-2"}),n(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.category_id=o),type:"text",placeholder:"",class:"border rounded-lg mb-2 w-full"},[e[24]||(e[24]=t("option",{value:""},"Selecciona un Categoría",-1)),(i(!0),d(y,null,_(p.categories,o=>(i(),d("option",{key:o.id,value:o.id},c(o.name),9,ie))),128))],512),[[P,l.value.category_id]])]),t("div",null,[r(a,{for:"description",value:"Descripción"}),n(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.description=o),placeholder:"Descripción",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,l.value.description]])]),t("div",null,[r(a,{for:"sku",value:"SKU"}),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.sku=o),type:"text",placeholder:"SKU",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,l.value.sku]])]),t("div",null,[r(a,{for:"price",value:"Precio"}),n(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.price=o),type:"number",placeholder:"Precio",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,l.value.price]])]),t("div",null,[r(a,{for:"cost",value:"Costo"}),n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.cost=o),type:"number",placeholder:"Costo",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,l.value.cost]])]),t("div",null,[r(a,{class:"block text-sm font-medium text-black"},{default:f(()=>[...e[25]||(e[25]=[x("Disponible",-1)])]),_:1}),n(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.is_active=o),class:"border p-2 rounded-lg w-full mb-2"},[...e[26]||(e[26]=[t("option",{value:"",disabled:"",selected:""}," Selecciona una opción ",-1),t("option",{value:"1"},"Sí",-1),t("option",{value:"0"},"No",-1)])],512),[[P,l.value.is_active]])]),t("div",null,[r(a,{for:"tax",value:"Impuesto"}),n(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.tax=o),type:"number",placeholder:"Impuesto",class:"border p-2 rounded-lg w-full mb-2"},null,512),[[u,l.value.tax]])])]),t("div",ue,[r(G,{onClick:k},{default:f(()=>[...e[27]||(e[27]=[x("Cancelar",-1)])]),_:1}),t("button",{onClick:e[10]||(e[10]=o=>N(l.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end uppercase flex items-center text-sm font-bold"},[...e[28]||(e[28]=[t("img",{src:"/assets/icons/svg/actions/save.svg",class:"w-8 inline-flex mr-2",alt:"Guardar Cambios"},null,-1),x("Guardar Cambios ",-1)])])])])])]),_:1},8,["show"])],64))}};export{xe as default};
