import{z as C,r as g,g as o,o as t,b as s,F as c,s as d,f as A,i as x,t as u,d as U,x as _,y as v}from"./app-DMZtkmGL.js";const E={class:"bg-white p-4 shadow sm:rounded-lg sm:p-8"},$={class:"min-w-full divide-y divide-gray-200"},z={class:"bg-white divide-y divide-gray-200"},P={class:"px-6 py-4 whitespace-nowrap"},B={key:0,class:"text-blue-500 font-extrabold"},S={class:"px-6 py-4 whitespace-nowrap"},T={class:"px-6 py-4 whitespace-nowrap"},V=["onClick"],j=["onChange"],F={disabled:"",selected:""},L=["value"],N=["onClick"],D={class:"px-6 py-4 whitespace-nowrap"},G={key:0,class:"font-extrabold text-center uppercase p-2 bg-green-300 text-green-600 text-sm rounded-xl"},Y={__name:"ListUsers",props:{users:Array,roles:Array,permissions:Array,me:Object},setup(b){const i=b,m=C().props.auth.user,f=i.users.map(n=>n.permissions).flat(),y=g(null),h=g(null),p=g({});console.log("Yo merengues",m),console.log("Usuarios",i.users),console.log("Usuario con roles)",i.users.roles),console.log("Permisos de usuarios",f),console.log("Roles",i.roles);const k=(n,a)=>{console.log(`Actualizar rol para el usuario ${n} al rol ${a}`),_.post(route("/Role/Update"),{user_id:n,role:a},{onSuccess:()=>{v().success("Rol actualizado con éxito"),console.log("Rol actualizado con éxito")},onError:e=>{console.error("Error al actualizar el rol:",e)}})},w=(n,a)=>{console.log(`Activar rol para el usuario ${n} al rol ${a}`),_.post(route("/Role/Activate"),{user_id:n,role:a},{onSuccess:()=>{v().success("Rol activado con éxito"),console.log("Rol activado con éxito")},onError:e=>{console.error("Error al activar el rol:",e)}})};return(n,a)=>(t(),o("div",E,[s("table",$,[a[1]||(a[1]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rol "),s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Permisos ")])],-1)),s("tbody",z,[(t(!0),o(c,null,d(i.users,e=>(t(),o("tr",{key:e.id},[s("td",P,[A(u(e.name)+" ",1),e.id===U(m).id?(t(),o("span",B,"(Tú)")):x("",!0)]),s("td",S,u(e.email),1),s("td",T,[e.roles.length?x("",!0):(t(),o("button",{key:0,onClick:r=>w(e.id,"Cocinero"),class:"uppercase bg-green-500 hover:bg-green-800 text-white font-bold p-2 flex justify-center rounded"}," Activar Rol ",8,V)),(t(!0),o(c,null,d(e.roles,r=>(t(),o("div",{key:r.id,class:"grid grid-cols-1 gap-2"},[s("select",{onChange:l=>{y.value=e.id,h.value=r.id,p.value.value=l.target.value,console.log("Rol seleccionado:",p.value.value,"Para el usuario:",e.id)}},[s("option",F,u(r.name),1),(t(!0),o(c,null,d(i.roles.filter(l=>!e.roles.some(R=>R.id===l.id)),l=>(t(),o("option",{key:l.id,value:l.name},u(l.name),9,L))),128))],40,j),y.value===e.id&&h.value===r.id?(t(),o("button",{key:0,class:"p-2 bg-blue-500 hover:bg-blue-800 transform duration-300 text-white rounded text-sm",onClick:l=>k(e.id,p.value.value)}," Guardar Cambios ",8,N)):x("",!0)]))),128))]),s("td",D,[s("ul",null,[(t(!0),o(c,null,d(e.roles,r=>(t(),o("li",{key:r.id,class:"grid grid-cols-1 2xl:grid-cols-3 gap-2"},[r.name==="Admin"?(t(),o("span",G,"All")):(t(!0),o(c,{key:1},d(r.permissions,l=>(t(),o("span",{onChange:a[0]||(a[0]=()=>{}),key:l.id,class:"font-extrabold text-sm p-2 rounded-xl text-center uppercase bg-green-300 text-green-600"},u(l.name),33))),128))]))),128))])])]))),128))])])]))}};export{Y as default};
