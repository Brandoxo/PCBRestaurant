import{r as c,z as L,j as C,g as n,o as d,b as s,a as r,k as p,q as v,i as _,F as h,s as j,t as g,w as E,A,f as U,S as z,x as T,y as b}from"./app-BX2nPfEP.js";import{_ as R}from"./Modal-JuyvjocV.js";import{_ as D}from"./StatusBadge-DpN_vPNh.js";import{C as q}from"./CancelButton-CUtHvt5M.js";import{_ as x}from"./InputError-CEr37mH4.js";import{_ as w}from"./InputLabel-7pc1LSAT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"bg-white p-4 rounded-2xl w-full max-w-96 sm:max-w-[40rem] lg:max-w-full mx-auto"},G={class:"overflow-y-auto lg:py-60 lg:h-screen lg:pt-0 scrollbar-hide"},P={class:"w-full mt-2 border"},I={class:"bg-gray-100"},O={key:0,class:"p-4"},Q={class:"border p-2 text-center"},H={class:"border p-2 text-center"},J={class:"border p-2 text-center"},K={class:"border p-2 text-center"},W={key:0,class:"border p-2 flex gap-2 justify-center"},X=["onClick"],Y=["onClick"],Z={class:"p-6"},ee={class:"flex flex-col"},se={class:"flex justify-between"},te={class:"flex justify-between"},ie={__name:"ListTables",props:{mesas:Object},setup(k){const f=c({errors:{}}),u=k,l=c(!1),a=c({}),i=L().props.auth.user,y=C(()=>(console.log("DETAILS:",i),i&&i.roles&&i.roles.includes("Admin"))),B=()=>{l.value=!1},S=o=>{const e=u.mesas.data.find(t=>t.id===o);a.value=e?{...e}:{id:o,number:"",status:"",capacity:""},l.value=!0},M=o=>{var e;if(a.value.number===((e=u.mesas.data.find(t=>t.number===a.value.number&&t.id!==o))==null?void 0:e.number)){document.querySelector(".text-red-500").classList.remove("hidden");return}T.put(`/Tables/edit/${o}`,a.value,{onSuccess:()=>{b().success("Mesa actualizada exitosamente"),l.value=!1},onError:t=>{b().error("Error al actualizar la mesa"),console.error("Error al actualizar mesa:",t)}})},$=o=>{z.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar mesa",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&T.delete(`/Tables/${o}`,{onSuccess:()=>{b().success("Mesa eliminada exitosamente")},onError:t=>{b().error("Error al eliminar mesa"),console.error("Error al eliminar mesa:",t)}})})},m=c(""),N=C(()=>m.value?u.mesas.data.filter(o=>o.number.toString().includes(m.value)):u.mesas.data);return(o,e)=>(d(),n(h,null,[s("div",F,[p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),type:"text",placeholder:"Buscar mesa...",class:"border p-2 rounded-lg w-full mb-4"},null,512),[[v,m.value]]),s("div",G,[s("table",P,[s("thead",null,[s("tr",I,[e[6]||(e[6]=s("th",{class:"p-4"},"#",-1)),e[7]||(e[7]=s("th",{class:"p-4"},"Numero",-1)),e[8]||(e[8]=s("th",{class:"p-4"},"Estado",-1)),e[9]||(e[9]=s("th",{class:"p-4"},"Capacidad",-1)),y.value?(d(),n("th",O,"Acciones")):_("",!0)])]),s("tbody",null,[(d(!0),n(h,null,j(N.value,t=>(d(),n("tr",{key:t.id},[s("td",Q,g(t.id),1),s("td",H,g(t.number),1),s("td",J,[r(D,{status:t.status},null,8,["status"])]),s("td",K,g(t.capacity)+" Personas ",1),y.value&&t.status==="Libre"||t.status==="Reservada"?(d(),n("td",W,[s("button",{onClick:V=>S(t.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...e[10]||(e[10]=[s("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,X),s("button",{onClick:V=>$(t.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...e[11]||(e[11]=[s("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,Y)])):_("",!0)]))),128))])])])]),r(R,{show:l.value,"onUpdate:show":e[5]||(e[5]=t=>l.value=t)},{default:E(()=>[s("div",Z,[e[15]||(e[15]=s("h3",{class:"text-lg font-bold mb-4"},"Editar Categoría",-1)),s("form",ee,[s("div",null,[r(w,{for:"number",value:"Número de Mesa",class:"mb-2"}),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.number=t),type:"text",placeholder:"Numero de Mesa",class:"border p-2 rounded-lg mb-4 w-full"},null,512),[[v,a.value.number]]),r(x,{message:f.value.errors.number},null,8,["message"]),e[12]||(e[12]=s("span",{class:"text-red-500 hidden"},"Este número de mesa ya está en uso.",-1))]),s("div",se,[s("div",null,[r(w,{for:"status",value:"Estado",class:"m-2"}),p(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.status=t),class:"border p-2 rounded-lg mb-4"},[...e[13]||(e[13]=[s("option",{value:"",disabled:"",selected:""}," Selecciona un estado ",-1),s("option",{value:"Libre"},"Libre",-1),s("option",{value:"Reservada"},"Reservada",-1)])],512),[[A,a.value.status]]),r(x,{message:f.value.errors.status},null,8,["message"])]),s("div",null,[r(w,{for:"capacity",value:"Capacidad",class:"m-2"}),p(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.capacity=t),type:"text",placeholder:"Capacidad",class:"border p-2 rounded-lg mb-4"},null,512),[[v,a.value.capacity]]),r(x,{message:f.value.errors.capacity},null,8,["message"])])]),s("div",te,[r(q,{onClick:B},{default:E(()=>[...e[14]||(e[14]=[U("Cancelar",-1)])]),_:1}),s("button",{onClick:e[4]||(e[4]=t=>M(a.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end"}," Guardar Cambios ")])])])]),_:1},8,["show"])],64))}};export{ie as default};
