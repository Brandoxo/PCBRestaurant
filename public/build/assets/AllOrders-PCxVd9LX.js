import{_ as B}from"./StatusBadge-ohNIB1x0.js";import{g as a,o as n,b as t,a as C,f as S,t as o,i as A,F as y,s as b,n as _,r as v,z as D,j as E,l as L,G as V,S as x}from"./app-DmJCh1b2.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"flex mb- justify-evenly items-center"},$={class:"md:text-lg lg:text-xl"},F={class:"font-extrabold"},G={class:"text-center text-3xl font-bold"},H={key:0},J={key:1},M={class:"flex justify-center items-center text-sm mt-2 gap-2"},R={class:"text-center text-secondary"},W={class:"text-center text-secondary"},q={class:"mt-2 w-full border rounded px-2 py-1"},P=["value"],K={__name:"Orders",props:{order:Object},setup(e){return console.log("order:",e.order.order_details),(w,d)=>{var i,u,l,m,f;return n(),a("div",{class:_(["bg-white p-2 rounded-lg shadow-md mt-4 max-w-md mx-auto w-full",e.order.status==="Cancelada"?"opacity-50 border-2 border-red-500":"",e.order.status==="Completada"?"border-2 border-green-500 opacity-50":""])},[t("div",z,[t("h2",$,[d[0]||(d[0]=S(" Orden ",-1)),t("span",F,"ID #"+o(e.order.id??"0000"),1)]),C(B,{status:e.order.status},null,8,["status"])]),t("h2",G,[S(o(((i=e.order.table)==null?void 0:i.name)??((u=e.order.room)==null?void 0:u.name)??"N/A")+" ",1),e.order.room?(n(),a("span",H,o((l=e.order.room)==null?void 0:l.prefix)+"-"+o((m=e.order.room)==null?void 0:m.number),1)):e.order.table?(n(),a("span",J,o((f=e.order.table)==null?void 0:f.number),1)):A("",!0)]),t("div",M,[t("p",R,o(e.order.date_time?new Date(e.order.date_time).toLocaleTimeString():"-"),1),d[1]||(d[1]=t("span",{class:"text-secondary"},"|",-1)),t("p",W,o(e.order.date_time?new Date(e.order.date_time).toLocaleDateString():"-"),1)]),t("select",q,[d[2]||(d[2]=t("option",{class:"text-center",disabled:"",selected:""}," Ver menú de la Orden ",-1)),(n(!0),a(y,null,b(e.order.order_details,r=>(n(),a("option",{disabled:"",key:r.id,value:r.product.id},o(r.product.name)+" x"+o(r.quantity),9,P))),128))])],2)}}},Q=["onClick","gs-x","gs-y","data-gs-id"],U={__name:"AllOrders",props:{orders:Array},emits:["select"],setup(e,{emit:p}){const w=e,d=p,i=v(h()),u=v(null);let l;const m=D().props.auth.user,f=E(()=>m&&m.permissions&&m.permissions.includes("hide orders")),r=v(JSON.parse(localStorage.getItem("deletedOrderIds")||"[]"));function O(){localStorage.setItem("deletedOrderIds",JSON.stringify(r.value))}function h(){return window.innerWidth<1536?1:window.innerWidth<2048?2:3}function I(){l&&l.column(h())}return L(()=>{i.value=h(),u.value&&(l=V.init({cellHeight:180,column:i.value,resizable:{handles:"none"},removable:!0,removeTimeout:100},u.value),l.on("removed",function(N,k){k.forEach(s=>{const c=s.el.getAttribute("data-gs-id"),g=w.orders.find(T=>T.id.toString()===c);!r.value.includes(c)&&g.status==="Completada"?(r.value.push(c),x.fire({title:"Orden eliminada",text:"La orden ha sido eliminada correctamente.",icon:"success",confirmButtonText:"Aceptar"}),O()):g.status==="Cancelada"&&f.value?(r.value.push(c),x.fire({title:"Orden Eliminada",text:"Orden Cancelada eliminada exitosamente.",icon:"success",confirmButtonText:"Aceptar"}),O()):g.status==="En curso"?x.fire({title:"Orden en curso...",text:"No es posible eliminar las órdenes en curso.",icon:"error",confirmButtonText:"Aceptar"}).then(()=>{location.reload()}):x.fire({title:"No se puede eliminar",text:"Tus permisos de usuario no permite eliminar Órdenes Canceladas. Solicite a un administrador.",icon:"error",confirmButtonText:"Aceptar"}).then(()=>{location.reload()})})}),window.addEventListener("resize",I))}),(N,k)=>(n(),a("div",{ref_key:"gridRef",ref:u,class:"grid-stack"},[!e.orders||e.orders.length===0?(n(),a(y,{key:0},b(15,s=>t("div",{key:s,class:"animate-pulse bg-gray-300 2xl:w-56 h-28 rounded-lg grid-stack-item"})),64)):A("",!0),(n(!0),a(y,null,b(e.orders.filter(s=>!r.value.includes(s.id.toString())),(s,c)=>(n(),a("div",{key:s.id,onClick:g=>d("select",s),class:"cursor-pointer overflow-y-auto hover:scale-[1.03] transition-all transform ease-in-out duration-300 grid-stack-item","gs-x":c%i.value,"gs-y":Math.floor(c/i.value),"gs-width":1,"gs-height":1,"data-gs-id":s.id},[C(K,{order:s},null,8,["order"])],8,Q))),128))],512))}},ee=j(U,[["__scopeId","data-v-c5ef1f5a"]]);export{ee as default};
