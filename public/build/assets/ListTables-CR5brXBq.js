import{r as m,j as V,g as n,o as d,b as s,a as r,k as c,q as f,i as w,d as y,F as C,s as L,t as v,w as _,B as j,f as U,S as R,x as h,y as p}from"./app-DbiGUJdc.js";import{_ as z}from"./Modal-CV1eb-om.js";import{_ as q}from"./StatusBadge-C0_8Z20v.js";import{C as A}from"./CancelButton-gLrk5CxZ.js";import{_ as g}from"./InputError-Z7ONOJ8U.js";import{_ as x}from"./InputLabel-GhMHpUAM.js";import{i as E}from"./isAdmin-DVsfzEus.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"bg-white p-4 rounded-2xl w-full max-w-96 sm:max-w-[40rem] lg:max-w-full mx-auto"},F={class:"overflow-y-auto lg:py-60 lg:h-screen lg:pt-0 scrollbar-hide"},G={class:"w-full mt-2 border"},O={class:"bg-gray-100"},P={key:0,class:"p-4"},Q={class:"border p-2 text-center"},H={class:"border p-2 text-center"},I={class:"border p-2 text-center"},J={class:"border p-2 text-center"},K={key:0,class:"border p-2 flex gap-2 justify-center"},W=["onClick"],X=["onClick"],Y={class:"p-6"},Z={class:"flex flex-col"},ee={class:"flex justify-between"},se={class:"flex justify-between"},ue={__name:"ListTables",props:{mesas:Object},setup(B){const b=m({errors:{}}),i=B,l=m(!1),a=m({}),T=()=>{l.value=!1},k=o=>{const e=i.mesas.data.find(t=>t.id===o);a.value=e?{...e}:{id:o,number:"",status:"",capacity:""},l.value=!0},S=o=>{var e;if(a.value.number===((e=i.mesas.data.find(t=>t.number===a.value.number&&t.id!==o))==null?void 0:e.number)){document.querySelector(".text-red-500").classList.remove("hidden");return}h.put(`/Tables/edit/${o}`,a.value,{onSuccess:()=>{p().success("Mesa actualizada exitosamente"),l.value=!1},onError:t=>{p().error("Error al actualizar la mesa"),console.error("Error al actualizar mesa:",t)}})},M=o=>{R.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar mesa",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&h.delete(`/Tables/${o}`,{onSuccess:()=>{p().success("Mesa eliminada exitosamente")},onError:t=>{p().error("Error al eliminar mesa"),console.error("Error al eliminar mesa:",t)}})})},u=m(""),$=V(()=>u.value?i.mesas.data.filter(o=>o.number.toString().includes(u.value)):i.mesas.data);return(o,e)=>(d(),n(C,null,[s("div",D,[c(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),type:"text",placeholder:"Buscar mesa...",class:"border p-2 rounded-lg w-full mb-4"},null,512),[[f,u.value]]),s("div",F,[s("table",G,[s("thead",null,[s("tr",O,[e[6]||(e[6]=s("th",{class:"p-4"},"#",-1)),e[7]||(e[7]=s("th",{class:"p-4"},"Numero",-1)),e[8]||(e[8]=s("th",{class:"p-4"},"Estado",-1)),e[9]||(e[9]=s("th",{class:"p-4"},"Capacidad",-1)),y(E)()?(d(),n("th",P,"Acciones")):w("",!0)])]),s("tbody",null,[(d(!0),n(C,null,L($.value,t=>(d(),n("tr",{key:t.id},[s("td",Q,v(t.id),1),s("td",H,v(t.number),1),s("td",I,[r(q,{status:t.status},null,8,["status"])]),s("td",J,v(t.capacity)+" Personas ",1),y(E)()&&t.status==="Libre"||t.status==="Reservada"?(d(),n("td",K,[s("button",{onClick:N=>k(t.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...e[10]||(e[10]=[s("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,W),s("button",{onClick:N=>M(t.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...e[11]||(e[11]=[s("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,X)])):w("",!0)]))),128))])])])]),r(z,{show:l.value,"onUpdate:show":e[5]||(e[5]=t=>l.value=t)},{default:_(()=>[s("div",Y,[e[15]||(e[15]=s("h3",{class:"text-lg font-bold mb-4"},"Editar Categoría",-1)),s("form",Z,[s("div",null,[r(x,{for:"number",value:"Número de Mesa",class:"mb-2"}),c(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.number=t),type:"text",placeholder:"Numero de Mesa",class:"border p-2 rounded-lg mb-4 w-full"},null,512),[[f,a.value.number]]),r(g,{message:b.value.errors.number},null,8,["message"]),e[12]||(e[12]=s("span",{class:"text-red-500 hidden"},"Este número de mesa ya está en uso.",-1))]),s("div",ee,[s("div",null,[r(x,{for:"status",value:"Estado",class:"m-2"}),c(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.status=t),class:"border p-2 rounded-lg mb-4"},[...e[13]||(e[13]=[s("option",{value:"",disabled:"",selected:""}," Selecciona un estado ",-1),s("option",{value:"Libre"},"Libre",-1),s("option",{value:"Reservada"},"Reservada",-1)])],512),[[j,a.value.status]]),r(g,{message:b.value.errors.status},null,8,["message"])]),s("div",null,[r(x,{for:"capacity",value:"Capacidad",class:"m-2"}),c(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.capacity=t),type:"text",placeholder:"Capacidad",class:"border p-2 rounded-lg mb-4"},null,512),[[f,a.value.capacity]]),r(g,{message:b.value.errors.capacity},null,8,["message"])])]),s("div",se,[r(A,{onClick:T},{default:_(()=>[...e[14]||(e[14]=[U("Cancelar",-1)])]),_:1}),s("button",{onClick:e[4]||(e[4]=t=>S(a.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end"}," Guardar Cambios ")])])])]),_:1},8,["show"])],64))}};export{ue as default};
