import{m as d,j as $,g as c,o as p,b as e,a as l,k as m,p as g,F as b,q as N,t as f,w as j,S as D,s as x,x as u}from"./app-BTgeQ286.js";import{_ as L}from"./Modal-mkrzPAHm.js";import{_ as C}from"./InputLabel-DLboylzN.js";import{_ as w}from"./InputError-DZt0BJvn.js";const V={class:"bg-white p-4 rounded-2xl"},M={class:"w-full mt-2 border"},T={class:"border p-2 text-center"},U={class:"border p-2 text-center"},z={class:"border p-2 text-center"},q={class:"border p-2 flex gap-2 justify-center"},F=["onClick"],G=["onClick"],R={class:"p-6"},A={class:"flex flex-col"},O={class:"flex justify-between"},Q={class:"flex justify-between"},P={__name:"ListCategories",props:{categories:Object},setup(h){const v=d({errors:{}}),r=d({}),a=d(!1),n=h,_=o=>{a.value=!0,r.value=n.categories.data.find(t=>t.id===o)},y=()=>{a.value=!1},E=o=>{var t;if(r.value.name===((t=n.categories.data.find(s=>s.name===r.value.name&&s.id!==o))==null?void 0:t.name)){document.querySelector(".text-red-500").classList.remove("hidden");return}x.put(`/Categories/edit/${o}`,r.value,{preserveState:!1,replace:!0,onSuccess:()=>{u().success("Categoría actualizada exitosamente"),a.value=!1},onError:s=>{u().error("Error al actualizar la categoría"),console.error("Error al actualizar categoría:",s)}})},B=o=>{D.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&x.delete(`/Categories/${o}`,{onSuccess:()=>{u().success("Categoría eliminada exitosamente")},onError:s=>{u().error("Error al eliminar la categoría"),console.error("Error al eliminar categoría:",s)}})})},i=d(""),k=$(()=>i.value?n.categories.data.filter(o=>o.name.toLowerCase().includes(i.value.toLowerCase())):n.categories.data);return(o,t)=>(p(),c(b,null,[e("div",V,[e("form",null,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),type:"text",placeholder:"Buscar Categoría...",class:"border p-2 rounded-lg w-full mb-4"},null,512),[[g,i.value]])]),e("table",M,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"p-4"},"#"),e("th",{class:"p-4"},"Nombre"),e("th",{class:"p-4"},"Descripción"),e("th",{class:"p-4"},"Acciones")])],-1)),e("tbody",null,[(p(!0),c(b,null,N(k.value,s=>(p(),c("tr",{key:s.id},[e("td",T,f(s.id),1),e("td",U,f(s.name),1),e("td",z,f(s.description),1),e("td",q,[e("button",{onClick:S=>_(s.id),class:"bg-midBlue hover:bg-strongBlue text-white p-1 rounded"},[...t[5]||(t[5]=[e("img",{src:"/assets/icons/svg/actions/edit.svg",alt:"Editar",class:"w-6"},null,-1)])],8,F),e("button",{onClick:S=>B(s.id),class:"bg-dangerRed hover:bg-red-700 text-white p-1 rounded"},[...t[6]||(t[6]=[e("img",{src:"/assets/icons/svg/actions/delete.svg",alt:"Eliminar",class:"w-6"},null,-1)])],8,G)])]))),128))])])]),l(L,{show:a.value,"onUpdate:show":t[4]||(t[4]=s=>a.value=s)},{default:j(()=>[e("div",R,[t[9]||(t[9]=e("h3",{class:"text-lg font-bold mb-4"},"Editar Categoría",-1)),e("form",A,[e("div",O,[e("div",null,[l(C,{for:"name",value:"Nombre"}),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.name=s),type:"text",placeholder:"Nombre de Categoría",class:"border p-2 rounded-lg mb-4 w-full"},null,512),[[g,r.value.name]]),l(w,{message:v.value.errors.name},null,8,["message"]),t[8]||(t[8]=e("span",{class:"text-red-500 hidden"},"Este nombre ya está en uso",-1))]),e("div",null,[l(C,{for:"description",value:"Descripción"}),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.description=s),type:"text",placeholder:"Descripción",class:"border p-2 rounded-lg mb-4 w-full"},null,512),[[g,r.value.description]]),l(w,{message:v.value.errors.description},null,8,["message"])])]),e("div",Q,[e("button",{onClick:y,class:"bg-dangerRed hover:bg-red-700 text-white px-4 py-2 rounded-lg"}," Cancelar "),e("button",{onClick:t[3]||(t[3]=s=>E(r.value.id)),type:"button",class:"bg-approveGreen hover:bg-green-600 text-white px-4 py-2 rounded-lg self-end"}," Guardar Cambios ")])])])]),_:1},8,["show"])],64))}};export{P as default};
